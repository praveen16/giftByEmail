raptor.defineClass("com.ebay.raptor.vi.MsgHandler",function(){var a={};a.msg={VALIDATE_MSKU_VARIATIONS:"_VALIDATE_MSKU_VARIATIONS",TRIGGER_MSKU_IMG_GROUPING:"_TRIGGER_MSKU_IMG_GROUPING",VARIATION_EDIT_WATCH_STATUS:"VARIATION_EDIT_WATCH_STATUS",VALIDATE_QTY_MODULE_READY:"VALIDATE_QTY_MODULE_READY",VALIDATE_MAPSTP_MODULE_READY:"VALIDATE_MAPSTP_MODULE_READY",VALIDATE_LIST_MODULE_READY:"VALIDATE_LIST_MODULE_READY",VALIDATE_CART_MODULE_READY:"VALIDATE_CART_MODULE_READY",GROUP_MSKU_IMAGES:"_GROUP_MSKU_IMAGES",
TRIGGER_CLICK_ON_FILMSTRIP_IMG:"_TRIGGER_CLICK_ON_FILMSTRIP_IMG",TOGGLE_QTY_DISPLAY_STATE:"_TOGGLE_QTY_DISPLAY_STATE",UPDATE_MAP_VALUES:"_UPDATE_MAP_VALUES",UPDATE_MAP_VALUES:"_UPDATE_MAP_VALUES",UPDATE_STP_VALUES:"_UPDATE_STP_VALUES",ADD_TO_WATCH_LNK:"_ADD_TO_WATCH_LNK",ADD_TO_WATCH_BTN:"_ADD_TO_WATCH_BTN",HIDE_ADD_TO_CART_LINK:"HIDE_ADD_TO_CART_LINK",VALIDATE_QTY_MSKU:"_VALIDATE_QTY_MSKU",VARIATION_EDIT_WATCH_STATUS:"VARIATION_EDIT_WATCH_STATUS",SUBMIT_BINBTN:"_SUBMIT_BINBTN",SUBMIT_CARTBTN:"_SUBMIT_CARTBTN",
REMOVE_LISTS:"_REMOVE_LISTS",LIST_ADD_SVC_ID:"_LIST_ADD_SVC_ID",LIST_REMOVE_SVC_ID:"_LIST_REMOVE_SVC_ID",TRIGGER_REMOVE_SVC_ID:"_TRIGGER_REMOVE_SVC_ID",BEST_OFFER_SVC_ID:"_BEST_OFFER_SVC_ID",REVIEW_OFFER_SVC_ID:"_REVIEW_OFFER_SVC_ID",FORCE_CLOSE_OVERLAY:"FORCE_CLOSE_OVERLAY",BIN_SVC_ID:"_BIN_SVC_ID"};var d=function(b){var c=a.msg[b];return c};return d});
raptor.defineClass("com.ebay.raptor.vi.overlayHandler",function(){return{init:function(){var a=this;a.pubsub=raptor.require("pubsub");a.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler");a.listOfOverlayIds=[];a.pubsub.subscribe("REGISTER_OVERLAY",function(b){a.registerOverlay(b)},a);a.pubsub.subscribe("FORCE_CLOSE_OVERLAY",function(b){a.forceCloseOverlay(b)},a)},registerOverlay:function(a){var b=this;b.listOfOverlayIds.push(a.id)},forceCloseOverlay:function(a){var b=this;for(i=0;i<b.listOfOverlayIds.length;i++)b.pubsub.publish("_CLOSE_OLAY",
{cmpId:b.listOfOverlayIds[i],hideOnly:a.hideOnly})}}});
raptor.defineClass("com.ebay.raptor.vi.topmessagepanel.TopMessagePanel",function(){return{init:function(d){var b=this;b.pubsub=raptor.require("pubsub");b.cfg=d;b.pubsub&&b.pubsub.subscribe(d.autoRefreshSvcId,function(a){b.setMessage(a)},b)},setMessage:function(d){var b=this,a=b.cfg,c=d,e,f=false,g=false,h,i;if(c){e=c.ViewerItemRelation;b.getTimeLeft(c);if(e=="HIGHBIDDER"){h=c.IsReserve&&!c.IsReserveMet?a.CHINESE_BUYER_HIGH_BIDDER_RESERVE_NOT_MET_PC_ON:a.CHINESE_BUYER_HIGH_BIDDER_PC_ON;f=true;g=false;
$("#"+a.panelId).find(".msg").addClass("msg green")}else if(e=="OUTBIDDER"){i=a.CHINESE_BUYER_OUTBIDDER_PC_ON;f=false;g=true;$("#"+a.panelId).find(".msg").addClass("msg red")}if(f)$("#"+a.smId).html(h);else g&&$("#"+a.smId).html(i)}},getTimeLeft:function(d){var b=this,a=d.TimeLeft,c=0;if(a)c=a.DaysLeft*24*60*60+a.HoursLeft*60*60+a.MinutesLeft*60+a.SecondsLeft;return c}}});
raptor.defineClass("com.ebay.raptor.vi.topmessagepanel.ListPanel",function(){return{init:function(c){var b=this;b.pubsub=raptor.require("pubsub");b.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler");b.cfg=c;b.listIds=[];b.prevListDetails=[];b.isPanelOpen=false;b.allListDetails=[];b.pubsub.subscribe(c.listAddSvcId,function(a){b.updateMsg(a)},b);b.pubsub.subscribe("STATUS_PANEL_LIST_SVC_INIT",function(a){b.updateMsg(a)},b);b.pubsub.subscribe("HIDE_DROPDOWN",function(){b.hideDropDown()},b);$("#"+c.remove).click(function(){b.remove()});
$("html").bind("click",function(){b.hideDropDown()})},hideDropDown:function(){var c=this;c.isPanelOpen&&c.hide()},updateMsg:function(c){var b=this,a=b.cfg;b.allListDetails=[];if(c){if(c.isOnLoad){if(c.isMSKU)b.listIds=[];b.prevListDetails=[];if(!c.listDetails||!(c.listDetails&&c.listDetails.length>0)){b.hideMessagePanel(false);return}}if(b.prevListDetails&&b.prevListDetails.length>0){b.addList(b.prevListDetails);b.prevListDetails.length=0}if(c.listDetails){b.buildMessage(c);c.isOnLoad&&c.listDetails&&
c.listDetails.length>1&&b.addList(c.listDetails);b.prevListDetails=c.listDetails;for(var e=0;e<c.listDetails.length;e++){var f=c.listDetails[e];if(f.isWatchList){b.toggleWatcherViewMsg(false);break}}}b.allListDetails=[];b.allListDetails=c.isOnLoad?b.prevListDetails:b.prevListDetails.concat(b.listIds)}if(b.listIds.length>1){b.toggleBinded=true;$("#"+a.icon).bind("click",function(d){d.stopPropagation();b.togglePanel()})}},togglePanel:function(){var c=this;if(c.isPanelOpen)c.hide();else{c.show();c.pubsub.publish(c.msgs("FORCE_CLOSE_OVERLAY"),
{hideOnly:true})}},show:function(){var c=this,b=c.cfg,a,e,f,d,g,h;a=$("#"+b.icon);d=$("#"+b.listPanel);h=$("#"+b.msgPanel);if(a&&d&&h){$(a).addClass(b.iconCSS);e=$(a).width();f=$(a).position().left;$(d).offset({top:0,left:0});g=$(d).width();h=$(h).height();if($.browser.msie&&$.browser.version<8)h-=20;if(f+e<g)a=f;else{e=$(a).outerWidth();a=f+e-g-2}if(b.isRefresh){a=f;h-=20}$(d).css({position:"absolute",top:h+"px",left:a+"px",display:"block"});c.isPanelOpen=true}},hide:function(){var c=this,b=c.cfg;
$("#"+b.icon).removeClass(b.iconCSS);$("#"+b.listPanel).hide();c.isPanelOpen=false},addList:function(c){var b=this,a=false;if(c&&b.listIds)for(var e=0,f=c.length;e<f;e++){var d=c[e];if(d&&d.listId){for(var g=0,h=b.listIds.length;g<h;g++)if(b.listIds[g].listId&&d.listId===b.listIds[g].listId){a=true;break}a||b.add(d)}}},add:function(c){var b=this,a=b.cfg;if(c){$("#"+a.listContainer).append(b.buildNewElem(c));b.listIds.push(c)}},buildNewElem:function(c){var b=this,a=b.cfg,e;if(c){e=document.createElement("a");
e.id=c.listId;e.innerHTML=c.isWatchList?a.watchListName:c.isWishList?a.wishListName:c.listName;e.setAttribute("n",c.listName);e.href=c.listURL;return e}return""},remove:function(){var c=this,b=c.cfg;c.pubsub&&c.pubsub.publish(b.triggerRemoveSvcId,{listDetails:c.allListDetails});$("#"+b.listContainer).empty();$("#"+b.listMsg).empty();$("#"+b.removeContainer).hide();c.listIds.length=0;c.prevListDetails.length=0;c.toggleWatcherViewMsg(true);c.hideMessagePanel(true)},toggleRemove:function(c){var b=this,
a=b.cfg;if(c===0)$("#"+a.removeContainer).hide();else{if(c===1)$("#"+a.remove).html(a.REMOVE);else c>1&&$("#"+a.remove).html(a.REMOVE_ALL);$("#"+a.removeContainer).show()}},hideMessagePanel:function(){var c=this,b=c.cfg;c.isPanelOpen&&c.hide();b.isHideStatusMsgPanel&&$("#"+b.msgPanel).hide();$("#listPanel").hide();$("#s_w_pipe").hide()},showMessagePanel:function(){var c=this,b=c.cfg;b.isHideStatusMsgPanel||$("#s_w_pipe").show();$("#"+b.msgPanel).show();$("#listPanel").show()},buildMessage:function(c){var b=
this,a=b.cfg,e,f="",d,g;if(c)if((d=c.listDetails)&&d.length>0){g=d.length;e=b.listIds.length;if(c.isOnLoad&&c.isSignedIn)f=b.buildShortMsg(d,g,e);else if(g===1){if((d=d[0])&&d.listId)if(e===0)f=d.isWatchList?a.ADDEDTO_WATCHLIST.replace(a.listLinkPH,d.listURL):d.isWishList?a.ADDEDTO_WISHLIST.replace(a.listLinkPH,d.listURL):a.ADDEDTO_ONE_LIST.replace(a.listLinkPH,d.listURL).replace(a.listNamePH,d.listName);else if(e===1){f=b.listIds[0].listURL;f=d.isWatchList?a.ADDEDTO_WATCHLIST_ONE_OTHER.replace(a.listLinkPH,
d.listURL).replace(a.otherLinkPH,f):d.isWishList?a.ADDEDTO_WISHLIST_ONE_OTHER.replace(a.listLinkPH,d.listURL).replace(a.otherLinkPH,f):a.ADDEDTO_ONE_LIST_ONE_OTHER.replace(a.listLinkPH,d.listURL).replace(a.otherLinkPH,f).replace(a.listNamePH,d.listName)}else if(e>1)f=d.isWatchList?a.ADDEDTO_WATCHLIST_MULTIPLE_OTHER.replace(a.listLinkPH,d.listURL).replace(a.otherLinkPH,"javascript:;").replace(a.listCountPH,e):d.isWishList?a.ADDEDTO_WISHLIST_MULTIPLE_OTHER.replace(a.listLinkPH,d.listURL).replace(a.otherLinkPH,
"javascript:;").replace(a.listCountPH,e):a.ADDEDTO_ONE_LIST_MULTIPLE_OTHER.replace(a.listLinkPH,d.listURL).replace(a.otherLinkPH,"javascript:;").replace(a.listCountPH,e).replace(a.listNamePH,d.listName)}else if(e===0)f=a.ADDEDTO_MULIPLE_NEW_LIST.replace(a.newListCountPH,g);else if(e===1)f=a.ADDEDTO_MULIPLE_NEW_LIST_ONE_OTHER.replace(a.newListCountPH,g).replace(a.otherLinkPH,d[0].listURL);else if(e>1)f=a.ADDEDTO_MULIPLE_NEW_LIST_MULTIPLE_OTHER.replace(a.newListCountPH,g).replace(a.listCountPH,e).replace(a.otherLinkPH,
"javascript:;");if(f){$("#"+a.listMsg).html(f).show();$("#"+a.listMsgContainer).show();b.showMessagePanel();c.isSignedIn?b.toggleRemove(g+e):$("#"+a.removeContainer).hide()}}},buildShortMsg:function(c,b,a){var e=this,f=e.cfg,d="";if(c)if(b===1&&a===0){a=c[0];d=a.isWatchList?f.ONLOAD_WATCHLIST.replace(f.listLinkPH,a.listURL):a.isWishList?f.ONLOAD_WISHLIST.replace(f.listLinkPH,a.listURL):f.ONLOAD_SINGLE_LIST.replace(f.listLinkPH,a.listURL).replace(f.listNamePH,a.listName)}else{a=b+a;d=f.ONLOAD_MULITPLE_LIST.replace(f.listLinkPH,
"javascript:;").replace(f.listCountPH,a)}return d},toggleWatcherViewMsg:function(c){var b=this,a=b.cfg;if(c){$("span#"+a.watcherViewMsgElem+" .viWatcherMsg").html("");$("#"+a.watcherViewMsgElem).hide()}else if(a.watcherViewMsg){$("span#"+a.watcherViewMsgElem+" .viWatcherMsg").html(a.watcherViewMsg);$("#"+a.watcherViewMsgElem).show()}}}});
raptor.defineClass("ebay.viewItem.PicturePanel",function(){return{init:function(a){var b=this;if(a.fsImgList){b.pubsub=raptor.require("pubsub");b.pubsub.publish("_TRIGGER_ZOOM_ENLARGE",{img:a.fsImgList[0],id:0})}}}});
raptor.defineClass("ebay.viewItem.ZoomEnlarge",function(){return{init:function(b){var a=this;a.conf=b;a.pubsub=raptor.require("pubsub");a.pubsub.subscribe("_TRIGGER_ZOOM_ENLARGE",function(c){a.handleMsg(c)},a);a.pubsub.subscribe("_SHOW_ENLARGE_MSG",function(){a.showZoomOrEnlargeMsg(false)},a);a.pubsub.subscribe("_HIDE_ENLARGE_MSG",function(c){a.toggleEnlargeMsg(c.isZoom)},a)},handleMsg:function(b){var a=this,c=b.img.enlargeEnabled,d=b.img.zoomEnabled;if(c&&d){$("#mainImgHldr").unbind("click");if("ontouchstart"in
document.documentElement){a.pubsub.publish("_TRIGGER_ENLARGE",{img:b.img,id:b.id,isZoom:"true",isTouch:"true"});a.showZoomOrEnlargeMsg(false)}else{a.pubsub.publish("_TRIGGER_ZOOM",{img:b.img,id:b.id});a.pubsub.publish("_TRIGGER_ENLARGE",{img:b.img,id:b.id,isZoom:"true"});a.showZoomOrEnlargeMsg(true)}}else if(c&&!d){var e=$("#mainImgHldr");e.unbind("mouseenter mouseleave");e.unbind("click");e.css("cursor","pointer");"ontouchstart"in document.documentElement?a.pubsub.publish("_TRIGGER_ENLARGE",{img:b.img,
id:b.id,isZoom:"false",isTouch:"true"}):a.pubsub.publish("_TRIGGER_ENLARGE",{img:b.img,id:b.id,isZoom:"false"});a.showZoomOrEnlargeMsg(false)}else{$("#mainImgHldr").unbind("mouseenter mouseleave mousemove");$("#mainImgHldr").unbind("click");$("#mainImgHldr").unbind("touchstart");a.hideZoomOrEnlargeMsg()}},showZoomOrEnlargeMsg:function(b){var a=this,c=a.conf,d=b?c.zoomMsg:c.enlargeMsg;$("#"+c.zoomEnMsgId).html(d);$("#"+c.zoomEnMsgCntId).css("visibility","visible")},hideZoomOrEnlargeMsg:function(){var b=
this;$("#"+b.conf.zoomEnMsgCntId).css("visibility","hidden")},toggleEnlargeMsg:function(b){var a=this,c=a.conf;b&&$("#"+c.zoomEnMsgId).html(c.zoomMsg)}}});
raptor.defineClass("ebay.viewItem.Zoom",function(){var g={};g.contants={PAD_18:18};g.util={hideOtherOverlay:function(){$("html").click();$("#vi_oly_atwlstovly").css("display","none");$("#vi_oly_vi-erc-bubble-olay").css("display","none");try{GH&&GH.hA()}catch(c){}}};return{init:function(c){var a=this;a.conf=c;a.imgArray=[];a.pubsub=raptor.require("pubsub");a.pubsub.subscribe("_TRIGGER_ZOOM",function(b){a.triggerZoom(b)},a);a.window=$(window);a.view=$("#mainImgHldr")},triggerZoom:function(c){var a=
this,b=a.conf;a.mainImg=$("#"+b.mainImgId);a.mainImg.id=c.id;a.mainImg.zoomImgUrl=c.img.maxImageUrl;a.mainImg.isZoom=c.img.zoomEnabled;a.mainImg.isEnlarge=c.img.enlargeEnabled;a.viewImg=$("#icImg");a.zoomImg=$("#"+b.zoomImgId);$("#mainImgHldr").unbind("mouseenter");$("#mainImgHldr").unbind("mouseleave");var d=document.createElement("img");d.setAttribute("imgId",c.id);d.src=a.mainImg.zoomImgUrl;if(d.complete||d.readyState===4)a.imageLoad(d);else d.onload=function(){a.imageLoad(d)}},imageLoad:function(c){var a=
this;if(c.getAttribute("imgId")==a.mainImg.id){a.bindTriggerEvent(c);if($.browser.msie||$.browser.opera)$("#mainImgHldr").bind("mousemove",function(){$("#mainImgHldr").unbind("mousemove");a.showZoomTriggerMask(c)});else a.view.is(":hover")&&a.showZoomTriggerMask(c)}},bindTriggerEvent:function(c){var a=this;$("#mainImgHldr").bind("mouseenter",function(){a.showZoomTriggerMask(c)});$("#mainImgHldr").bind("mouseleave",function(){a.hideZoomTriggerMask(c)})},initZoom:function(c){var a=this,b=a.conf,d=a.imgArray[a.mainImg.id];
if(!d){d={height:a.mainImg.height(),width:a.mainImg.width(),zoomImgHeight:c.height,zoomImgWidth:c.width,offset:a.mainImg.offset()};a.imgArray[a.imgId]=d}a.mainImgtopPad=(b.mImgContainerSize-d.height)/2;a.mainImgleftPad=(b.mImgContainerSize-d.width)/2;a.maskElem=$("#"+b.maskId);a.zoomCntr=$("#"+b.zoomCntrId);a.imgCntr=$("#"+b.imgCntrId);$("#vi_zoomEnl_plc_hldr").append(a.maskElem);$("#vi_zoomEnl_plc_hldr").append(a.zoomCntr);a.initZoomTriggerMask();a.initZoomViewer(a.imgArray[a.imgId]);a.initZoomSelector(a.imgArray[a.imgId])},
initZoomTriggerMask:function(){var c=this,a=c.conf;c.zoomTriggerMask=$("#vi_zoom_trigger_mask");c.zoomTriggerMask.css({height:a.mImgContainerSize,width:a.mImgContainerSize,top:0,left:1});c.zoomTriggerMarker=$("#vi_zoom_trigger_mrk");c.zoomTriggerMarker.css({top:(a.mImgContainerSize-120)/2,left:(a.mImgContainerSize-120)/2});c.view.append(c.zoomTriggerMask)},initZoomSelector:function(c){var a=this,b=a.conf;c=a.imgArray[a.imgId];a.ratioH=c.zoomImgHeight/c.height;a.ratioW=c.zoomImgWidth/c.width;a.zoomSelector=
$("#"+b.zoomSelId);var d=a.zoomCntr.height()/a.ratioH;d=d>c.height?c.height:d;var e=a.zoomCntr.width()/a.ratioW;e=e>c.width?c.width:e;a.zoomSelector.height(d);a.zoomSelector.width(e);a.view.append(a.zoomSelector)},initZoomViewer:function(c){var a=this,b=a.conf,d=b.redesign?$("#ItemPanel"):$("#LeftSummaryPanel"),e=$("#CenterPanel"),f=$("#PicturePanel").offset(),j=$(window).height(),k=$(window).scrollTop(),l=e.height(),h=l-(f.top-e.offset().top);if(b.redesign){var m=e.offset().top;windowViewerHeight=
j+k-f.top-3;if(windowViewerHeight<h)h=windowViewerHeight}var i=(d.width()-c.width)/2,n=i<0?b.mImgContainerSize+g.contants.PAD_18:b.mImgContainerSize+g.contants.PAD_18+i;if($.browser.msie&&$.browser.version<8){a.maskElem.css({top:f.top+"px",left:f.left+b.mImgContainerSize+g.contants.PAD_18-(b.redesign?3:0)+"px",height:h+"px",width:d.width()-(b.redesign?0:12)+"px"});a.zoomCntr.css({top:f.top+"px",left:f.left+b.mImgContainerSize+g.contants.PAD_18-(b.redesign?3:0)+"px",height:h+"px",width:d.width()-(b.redesign?
0:12)+"px"})}else{a.maskElem.css({top:f.top+"px",left:f.left+b.mImgContainerSize+g.contants.PAD_18-(b.redesign?3:0)+"px",height:h+"px",width:d.width()-(b.redesign?-5:g.contants.PAD_18)+"px"});a.zoomCntr.css({top:f.top+"px",left:f.left+b.mImgContainerSize+g.contants.PAD_18-(b.redesign?3:0)+"px",height:h+"px",width:d.width()-(b.redesign?-5:g.contants.PAD_18)+"px"})}},showZoomTriggerMask:function(c){var a=this;if(!(a.mainImg.width()==0||a.mainImg.height()==0)){a.isTriggerMaskShown=true;a.initZoom(c);
a.zoomTriggerMarker.bind("mouseenter",function(b){a.showingZoom||a.showZoom(b,c)});a.zoomTriggerMask.show();a.pubsub.publish("_SHOW_ENLARGE_MSG",{isZoom:true});a.mainImg.isEnlarge&&a.zoomTriggerMask.bind("click",function(){a.hideZoom();a.pubsub.publish("_SHOW_ENLARGE_IMG",{isZoom:true})})}},hideZoomTriggerMask:function(){var c=this;if(c.isTriggerMaskShown){c.zoomTriggerMask.hide();c.isTriggerMaskShown=false;if(c.mainImg.isZoom&&c.mainImg.isEnlarge){c.pubsub.publish("_HIDE_ENLARGE_MSG",{isZoom:true});
c.zoomTriggerMask.unbind("click")}}},showZoom:function(c,a){var b=this,d=b.conf;b.showingZoom=true;trackingUtil("ZOOM_ON_HOVER");g.util.hideOtherOverlay();b.zoomImg.attr("src",b.mainImg.zoomImgUrl);b.zoomTriggerMask.hide();b.view.bind("mouseleave",function(){b.hideZoom()});$(window).bind("resize",function(){b.hideZoom()});b.view.bind("mousemove",function(e){b.handleMoveEvt(e)});b.initZoomViewer(b.imgArray[b.imgId]);b.initZoomSelector(b.imgArray[b.imgId]);b.handleMoveEvt(c);b.zoomSelector.show();b.maskElem.show();
b.zoomCntr.show();b.imgCntr.show();b.zoomImg.show();b.pubsub.publish("_SHOW_ENLARGE_MSG",{isZoom:true});b.mainImg.isEnlarge&&b.zoomSelector.bind("click",function(){b.hideZoom();b.pubsub.publish("_SHOW_ENLARGE_IMG",{isZoom:true})});b.zoomTriggerMarker.unbind("mouseenter");d.imgCntrLeftPad=0;if(d.redesign&&a&&b.zoomCntr.width()>a.width)d.imgCntrLeftPad=(b.zoomCntr.width()-a.width)/2},hideZoom:function(){var c=this;c.showingZoom=false;c.view.unbind("mousemove");$(window).unbind("resize");c.zoomSelector.hide();
c.maskElem.hide();c.zoomCntr.hide();c.imgCntr.hide();c.zoomImg.hide();c.zoomImg.attr("src","http://p.ebaystatic.com/aw/pics/s.gif");if(c.mainImg.isZoom&&c.mainImg.isEnlarge){c.pubsub.publish("_HIDE_ENLARGE_MSG",{isZoom:true});c.zoomSelector.unbind("click")}},handleMoveEvt:function(c){var a=this,b=a.imgArray[a.imgId],d=a.window.scrollTop(),e=a.window.scrollLeft();a.setZoomPosition(Math.floor(c.clientX-a.viewImg.offset().left+e),Math.floor(c.clientY-a.viewImg.offset().top+d),b)},setZoomPosition:function(c,
a){var b=this,d=b.conf,e=c-b.zoomSelector.width()/2,f=a-b.zoomSelector.height()/2;e=Math.max(e,0);f=Math.max(f,0);e=Math.min(e,b.viewImg.width()-b.zoomSelector.outerWidth());f=Math.min(f,b.viewImg.height()-b.zoomSelector.outerHeight());b.zoomSelector.css({left:e+b.mainImgleftPad+1+"px",top:f+b.mainImgtopPad+"px"});b.imgCntr.css({top:-(f*b.ratioH)+"px",left:-(e*b.ratioW)+d.imgCntrLeftPad+"px"})}}});
raptor.defineClass("ebay.viewItem.Enlarge",function(){return{init:function(a){var b=this;b.conf=a;b.imgArray=a.imgArr;b.pubsub=raptor.require("pubsub");b.pubsub.subscribe("_TRIGGER_ENLARGE",function(c){b.triggerEnlarge(c)},b)},triggerEnlarge:function(a){var b=this,c=b.conf;b.imgId=a.id;b.enlargeImgUrl=a.img.maxImageUrl;b.isZoom=a.img.zoomEnabled;b.isEnlarge=a.img.enlargeEnabled;b.isTouchEvent=a.isTouch;b.enlargeImageElem=$("#"+c.enlargeImgId);b.imgViewer=$("#"+c.imgSpan);b.imgSpCnt=$("#"+c.imgSpanCnt);
b.zoomSelector=$("#en_layer_selector");b.bindTriggerEvent()},bindTriggerEvent:function(){var a=this;if(a.isTouchEvent)$("#mainImgHldr").bind("touchstart",function(b){b.stopPropagation();a.showLayerEvent()});else if(a.isZoom){if(!a.isSubscribedZoomMsg){a.pubsub.subscribe("_SHOW_ENLARGE_IMG",function(){a.showEnlargeLayer()},a);a.isSubscribedZoomMsg=true}}else $("#mainImgHldr").bind("click",function(){a.showLayerEvent()})},showLayerEvent:function(){var a=this,b=$("#"+a.conf.mainImgElmId);b.attr("clk")==
a.imgId&&b.css("display")!=="none"&&a.showEnlargeLayer()},showEnlargeLayer:function(){var a=this,b=a.conf;trackingUtil("ENLARGE_PANEL");if(!a.layerInit){a.layerInit=true;a.initEnlargeLayer()}if(!a.layerOpen){a.pubsub.publish("_OPEN_OLAY",{cmpId:b.olyId});a.layerOpen=true;a.attachLayerEvents();if(a.isFs){var c=$('div#enlarge_img_fs > ul > li[index="'+a.imgId+'"]');c.click();var d=$("#enfsthImg"+a.imgId).position().top;$("#"+b.fsPanelId).scrollTop(d)}else{a.setThrImage();a.enlargeImg=document.createElement("img");
a.enlargeImg.src=a.enlargeImgUrl;if(a.enlargeImg.complete||a.enlargeImg.readyState===4){a.setEnlargeImage(a.enlargeImgUrl);a.setImageSize();a.initZoomSelector();a.attachZoomEvent()}else a.enlargeImg.onload=function(){a.setEnlargeImage(a.enlargeImgUrl);a.setImageSize();a.initZoomSelector();a.attachZoomEvent()}}}},initEnlargeLayer:function(){var a=this,b=a.conf;a.enlargePanel=$("#"+b.enlarge_panel);a.enlargeFsPanel=$("#"+b.fsPanelId);a.enlargeImgPanel=$("#"+b.imgPanelId);a.enlargeImageElem.show();var c=
$(window).height()-100,d=$("#Body").width()-100,e=0,f=0;if(a.imgArray.length>1){a.isFs=true;e=c-40;f=b.totalThImg*parseInt(b.thHeight)>e?parseInt(b.thWidth)*2+20:parseInt(b.thWidth)+20;a.enlargeFsPanel.css({width:f,height:e})}a.imgPanelWidth=d-f-20;a.imgPanelHeight=c-20;a.enlargeImgPanel.css({width:a.imgPanelWidth,height:a.imgPanelHeight});a.enlargePanel.css({width:d,height:c});a.pubsub.channel(b.olyId).subscribe("_OLY_CLS_SVC",function(){a.detachLayerEvents()},a)},attachLayerEvents:function(){var a=
this,b=a.conf;if(a.isFs){$("#"+b.fsPanelId).bind("click",function(c){a.handleEnlargeFSClickEvt(c)});$("#"+b.en_fs_ul_id).bind("mouseover",function(c){a.handleMouseoverEvt(c)});$("#"+b.en_fs_ul_id).bind("mouseout",function(c){a.handleMouseoutEvt(c)})}},detachLayerEvents:function(){var a=this,b=a.conf;a.layerOpen=false;if(a.isFs){$("#"+b.fsPanelId).unbind();$("#"+b.en_fs_ul_id).unbind();$("#"+b.en_fs_ul_id).unbind()}a.showZoomImg(false)},handleEnlargeFSClickEvt:function(a){var b=this;if(a.target.nodeName!=
"DIV"){var c=parseInt(b.enlargeImageElem.attr("clk"))+1;b.changeImgOnClick(b.getCurImgIndex(a));c&&$("div#enlarge_img_fs > ul > li:nth-child("+c+")").css("border","");a.target.nodeName=="LI"?$(a.target).css("width","-=4").css("height","-=4").css("border","2px solid #666"):$(a.target).parents("li").css("width","-=4").css("height","-=4").css("border","2px solid #666");c&&$("div#enlarge_img_fs > ul > li:nth-child("+c+")").css("width","+=4").css("height","+=4")}},getCurImgIndex:function(a){var b=this,
c=0,d=$(a.target);return c=a.target.nodeName=="IMG"?d.attr("index"):$(d.find("img")).attr("index")},changeImgOnClick:function(a){var b=this,c=$('div#enlarge_img_fs > ul > li[index="'+a+'"]');b.enlargeImageElem.attr("clk",c.attr("imgn"));b.enlargeImageElem.attr("index",a);b.setThrImage();b.enlargeImg=document.createElement("img");b.enlargeImg.src=b.imgArray[a].maxImageUrl;if(b.enlargeImg.complete||b.enlargeImg.readyState===4){b.setEnlargeImage(b.imgArray[a].maxImageUrl);b.showZoomImg(false);b.initZoomSelector()}else b.enlargeImg.onload=
function(){b.setEnlargeImage(b.imgArray[a].maxImageUrl);b.showZoomImg(false);b.initZoomSelector()};b.attachZoomEvent()},attachZoomEvent:function(){var a=this;if(a.isMaxImgSize){a.isZoomAvail=false;a.imgViewer.removeClass();a.enlargeImageElem.unbind("click")}else{a.isZoomAvail=true;$.browser.msie?a.imgViewer.addClass("enlargeImgZinIE"):a.imgViewer.addClass("enlargeImgZin");a.enlargeImageElem.unbind("click");a.enlargeImageElem.bind("click",function(b){a.triggerZoomOnLayer(b)})}},changeImgOnHover:function(a){var b=
this;b.setThrImage();b.enlargeImg=document.createElement("img");b.enlargeImg.src=b.imgArray[a].maxImageUrl;if(b.enlargeImg.complete||b.enlargeImg.readyState===4){b.setEnlargeImage(b.imgArray[a].maxImageUrl);b.showZoomImg(false)}else b.enlargeImg.onload=function(){b.setEnlargeImage(b.imgArray[a].maxImageUrl);b.showZoomImg(false)}},showZoomImg:function(a){var b=this;if(a){b.imgViewer.removeClass();$.browser.msie?b.imgViewer.addClass("enlargeImgZoutIE"):b.imgViewer.addClass("enlargeImgZout");b.enlargeImageElem.css({width:b.enlargeImg.width,
height:b.enlargeImg.height});b.zoomSelector.show();b.isZoomed=true;b.imgViewer.bind("mousemove",function(c){b.handleZoomMoveEvt(c)})}else{if(b.isZoomAvail){b.imgViewer.removeClass();$.browser.msie?b.imgViewer.addClass("enlargeImgZinIE"):b.imgViewer.addClass("enlargeImgZin");b.imgViewer.unbind("mousemove")}b.imgSpCnt.css({top:"0px",left:0});b.zoomSelector.hide();b.setImageSize();b.isZoomed=false}},setImageSize:function(){var a=this,b=0,c=0,d=0,e=d=0;if(a.enlargeImg.width>a.imgPanelWidth||a.enlargeImg.height>
a.imgPanelHeight){a.isMaxImgSize=false;d=a.imgPanelHeight/a.enlargeImg.height;e=a.imgPanelWidth/a.enlargeImg.width;if(d=e>d?a.imgPanelHeight/a.enlargeImg.height:a.imgPanelWidth/a.enlargeImg.width){b=a.enlargeImg.height*d;c=a.enlargeImg.width*d}}else{a.isMaxImgSize=true;b=a.enlargeImg.height;c=a.enlargeImg.width}a.enlargeImageElem.css({width:c,height:b});a.imgViewer.css({width:c,height:b});a.imgSpCnt.css({width:c,height:b})},initZoomSelector:function(){var a=this;a.ratioH=a.enlargeImg.height/a.imgViewer.height();
a.ratioW=a.enlargeImg.width/a.imgViewer.width();var b=a.imgViewer.height()/a.ratioH;b=b>a.imgViewer.height()?a.imgViewer.height():b;var c=a.imgViewer.width()/a.ratioW;c=c>a.imgViewer.width()?a.imgViewer.width():c;a.zoomSelector.height(b);a.zoomSelector.width(c)},handleMouseoverEvt:function(a){var b=this;a.target.nodeName!="DIV"&&b.changeImgOnHover(b.getCurImgIndex(a))},handleMouseoutEvt:function(){var a=this,b=a.enlargeImageElem.attr("index");a.changeImgOnHover(b)},triggerZoomOnLayer:function(a){var b=
this;if(b.isZoomed){b.showZoomImg(false);trackingUtil("IMAGE_ZOOM_OUT")}else{b.showZoomImg(true);b.handleZoomMoveEvt(a);trackingUtil("IMAGE_ZOOM_IN")}},handleZoomMoveEvt:function(a){var b=this,c=$(window).scrollTop(),d=$(window).scrollLeft();b.setZoomPosition(Math.floor(a.clientX-b.imgViewer.offset().left+d),Math.floor(a.clientY-b.imgViewer.offset().top+c))},setZoomPosition:function(a,b){var c=this,d=a-c.zoomSelector.width()/2,e=b-c.zoomSelector.height()/2;d=Math.max(d,0);e=Math.max(e,0);d=Math.min(d,
c.imgViewer.width()-c.zoomSelector.outerWidth());e=Math.min(e,c.imgViewer.height()-c.zoomSelector.outerHeight());c.zoomSelector.css({left:d+"px",top:e+"px"});c.imgSpCnt.css({top:-(e*c.ratioH)+"px",left:-(d*c.ratioW)+"px"})},setThrImage:function(){var a=this;a.enlargeImageElem.css({width:30,height:30});$("#en_img_span_cnt").css("margin","30% 0");a.enlargeImageElem.attr("src","http://p.ebaystatic.com/aw/pics/globalAssets/imgLoading_30x30.gif")},setEnlargeImage:function(a){var b=this;$("#en_img_span_cnt").css("margin",
"");b.enlargeImageElem.attr("src",a)}}});
raptor.defineClass("ebay.viewItem.FilmStrip",function(){return{init:function(a){var b=this;b.conf=a;b.imgArray=a.fsImgList;b.pubsub=raptor.require("pubsub");b.handlrBinded||b.bindHandlr();b.mskuSkip=false;$("#icImg").attr("mskuSkip","false");b.registerPubSubEvents()},registerPubSubEvents:function(){this.pubsub.subscribe("_GROUP_MSKU_IMAGES",function(a){this.groupMSKUImages(a)},this);this.pubsub.subscribe("_TRIGGER_CLICK_ON_FILMSTRIP_IMG",function(a){this.triggerClickOnFsImg(a)},this)},bindHandlr:function(){var a=
this;a.handlrBinded=true;a.bindTriggerEvent()},bindTriggerEvent:function(){var a=this,b=a.conf;$("#"+b.fsId).bind("click",function(c){a.handleClickEvt(c)});$("#"+b.fsId).bind("mouseover",function(c){a.handleMouseoverEvt(c)});$("#"+b.fsId).bind("mouseout",function(c){a.handleMouseoutEvt(c)});$("#imgC").ready(function(){a.placeBorder($("div#imgC > ul > li:nth-child(1)"))})},handleClickEvt:function(a){var b=this;if(!($(a.target).is("div#imgC.flmstp")||a.target.nodeName=="LI")){var c=parseInt($("#icImg").attr("clk"))+
1;b.changeImgOnClick(b.getCurImgIndex(a));c&&$("div#imgC > ul > li:nth-child("+c+")").css("border","");if($("#icImg").attr("mskuIndex")){var d=eval("["+$("#icImg").attr("mskuIndex")+"]");d&&$.each(d,function(g,f){$("div#imgC > ul > li:nth-child("+(f+1)+") a").css("border","")})}var e=-1;if(a.target.nodeName=="LI"){$(a.target).css("width","-=4").css("height","-=4").css("border","2px solid #666");e=$(a.target).find("img").attr("index")}else{$(a.target).parents("li").css("width","-=4").css("height",
"-=4").css("border","2px solid #666");e=a.target.nodeName=="IMG"?$(a.target).attr("index"):$(a.target).find("img").attr("index")}c&&$("div#imgC > ul > li:nth-child("+c+")").css("width","+=4").css("height","+=4");e!=-1&&b.pubsub.publish("_TRIGGER_MSKU_IMG_GROUPING",{index:e,skipBoxReset:$("#icImg").attr("mskuSkip")})}},placeBorder:function(a){if(a)this.mskuSkip?$(a).css("width","-=4").css("height","-=4").css("border","0px"):$(a).css("width","-=4").css("height","-=4").css("border","2px solid #666")},
handleMouseoverEvt:function(a){var b=this;a.target.nodeName!="LI"&&b.getCurImgIndex(a)&&b.changeImgOnHover(b.getCurImgIndex(a))},handleMouseoutEvt:function(){var a=this,b=$("#icImg").attr("clk");b&&a.changeImgOnHover(b)},changeImgOnClick:function(a){var b=this,c=b.conf;$("#"+c.thbrImgId).attr("imgsel",a);$("#"+c.mainImgId).hide();$("#"+c.thbrImgId).attr("src","http://p.ebaystatic.com/aw/pics/globalAssets/imgLoading_30x30.gif");$("#"+c.thbrImgId).show();var d=document.createElement("img");d.src=b.imgArray[a].displayImgUrl;
if(d.complete||d.readyState===4){picOnLoad(true);$("#"+c.mainImgId).attr("src",b.imgArray[a].displayImgUrl);b.pubsub.publish("_TRIGGER_ZOOM_ENLARGE",{img:b.imgArray[a],id:a})}else d.onload=function(){picOnLoad(true);$("#"+c.mainImgId).attr("src",b.imgArray[a].displayImgUrl);b.pubsub.publish("_TRIGGER_ZOOM_ENLARGE",{img:b.imgArray[a],id:a})};d.onerror=function(){picOnError()}},changeImgOnHover:function(a){var b=this,c=b.conf;$("#"+c.mainImgId).hide();$("#"+c.thbrImgId).attr("src","http://p.ebaystatic.com/aw/pics/cmp/icn/iconImgNA_96x96.gif");
$("#"+c.thbrImgId).show();var d=document.createElement("img");d.src=b.imgArray[a].displayImgUrl;if(d.complete||d.readyState===4){$("#"+c.mainImgId).attr("src",b.imgArray[a].displayImgUrl);picOnLoad(false)}else d.onload=function(){$("#"+c.mainImgId).attr("src",b.imgArray[a].displayImgUrl);picOnLoad(false)}},getCurImgIndex:function(a){var b=this,c=0,d=$(a.target);return c=a.target.nodeName=="IMG"?d.attr("index"):$(d.find("img")).attr("index")},groupMSKUImages:function(a){$("#icImg").attr("clk",a.index);
$.each(a.imgGroupArr,function(b,c){c!=a.index&&$("div#imgC > ul > li:nth-child("+(c+1)+") a ").css("border","1px solid #333333")});a.imgGroupArr=jQuery.grep(a.imgGroupArr,function(b){return b!=a.index});$("#icImg").attr("mskuIndex",a.imgGroupArr);$("#icImg").attr("mskuSkip","false")},triggerClickOnFsImg:function(a){var b=$("div#imgC > ul > li:nth-child("+(a.index+1)+")").position().top,c=$("#imgC").position().top,d=b-c;this.mskuSkip=true;d+=$("#imgC").scrollTop();if(d<0)d=0;$("#imgC").scrollTop(d);
$("#icImg").attr("mskuSkip","true");$("div#imgC > ul > li:nth-child("+(a.index+1)+") > a").click()}}});
raptor.defineClass("com.ebay.raptor.vi.share.ShareLinks",function(){return{init:function(b){var d=this,a;if(b.widgetType=="SHARE"){var c=b.shareJsElmId;if(document.getElementById(c))return;a=document.createElement("script");a.id=c;a.async=true;a.defer=true;a.src=b.plaModel.shareWidgetJsUrl;$(window).load(function(){document.getElementsByTagName("head")[0].appendChild(a)})}if(b.widgetType=="SIGNALS"){c=b.signalsJsElmId;$("head").append('<meta property="fb:app_id" content="102628213125203">');if(!document.getElementById(c)){a=
document.createElement("script");a.id=c;a.async=true;a.defer=true;a.src=b.plaModel.socialSignalsJsUrl;$(window).load(function(){document.getElementsByTagName("head")[0].appendChild(a)})}}}}});
raptor.defineClass("ebay.viewItem.AddToWatchLink",function(){return{init:function(b){var a=this;a.conf=b;a.pubsub=raptor.require("pubsub");a.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil");a.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler");a.pubsub&&a.pubsub.subscribe(a.msgs("ADD_TO_WATCH_BTN"),function(c){a.toggleWatchLink(c.status)},a);a.attachClickEvent()},toggleWatchLink:function(b){var a=this,c=a.conf;b?$("#"+c.linkTopId).css("display","none"):$("#"+c.linkTopId).css("display","inline")},
attachClickEvent:function(){var b=this;$("#"+b.conf.linkTopId).click(function(){b.makeWatchRequest();return false})},makeWatchRequest:function(){var b=this,a=b.conf;b.pubsub.publish(b.msgs("ADD_TO_WATCH_LNK"),{status:true,addRequest:true,watchLink:a.addToWatchUrl})}}});
raptor.defineModule("com.ebay.raptor.vi.AjaxUtil",function(){return{getJSON:function(b,a,c){b&&$.getJSON(b+"&cb=?",function(){a&&a.apply(c,arguments)})},extractInlineCss:function(b){var a=document.createElement("style");a.type="text/css";if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(document.createTextNode(b));document.getElementsByTagName("head")[0].appendChild(a)},loadScripts:function(b,a,c){if(b)c?$.ajax({url:a,dataType:"script",cache:true,success:c}):$.ajax({url:a,dataType:"script",
cache:true});else{var d=document.createElement("script");d.type="text/javascript";d.text=a;document.getElementsByTagName("head")[0].appendChild(d)}}}});
raptor.defineClass("com.ebay.raptor.vi.ValidateQuantity",function(){return{init:function(a){var b=this;b.cfg=a;b.pubsub=raptor.require("pubsub");b.pubsub.subscribe("VALIDATE_QTY",function(c){b.validate(c)},b);b.pubsub.publish("VALIDATE_QTY",a);$("#"+a.qtyBoxId).keyup(function(){b.pubsub.publish("VALIDATE_QTY",a)});b.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler");b.registerPubSubMsgs(a)},registerPubSubMsgs:function(a){var b=this;if(this.pubsub){this.pubsub.subscribe(b.msgs("TOGGLE_QTY_DISPLAY_STATE"),
function(c){this.toggleQtyBox(a,c.isDisabled);this.variationId=c.variationId},this);this.pubsub.subscribe(b.msgs("VALIDATE_QTY_MSKU"),function(c){this.validateMSKUQty(a,c)},this);this.pubsub.publish(b.msgs("VALIDATE_QTY_MODULE_READY"),{})}},toggleQtyBox:function(a,b){$("#"+a.qtyBoxId).attr("disabled",b);b&&$("#"+a.qtyBoxId).attr(a.isValid,"false");$("#"+a.qtyBoxId).val(1)},validateMSKUQty:function(a,b){var c=this;a.remainingQty=b.quantityAvailable;a.maxQty=b.supressQty?b.maxQty:b.quantityAvailable;
a.variationId=b.variationId;a.isSupressQty=b.quantityAvailable===1?false:b.supressQty;c.pubsub.publish("VALIDATE_QTY",a)},validate:function(a){var b=this;a=a||b.cfg;var c=raptor.require("pubsub");if(a){var g=$("#"+a.qtyBoxId),d=$(g).val(),e=a.remainingQty,k=a.maxQty,q=$("#"+a.errorIcon),m=$("#"+a.errorMsg),h=true,f,j=e,r=b.isInteger(d),n=a.isMinRemnantSetEnabled,i=a.remnantQtyValue,o,l,p;if(n){o=e-i+1;l=e-d}if(!$(g).attr("disabled")){d=parseInt(d,10);if(!r||d<1)f=e===1?a.errTextMap[1]:a.errTextMap[3];
else if(d>e)f=a.isSupressQty||e>a.availQtyThreshold?a.errTextMap[4]:e===1?a.errTextMap[1]:a.errTextMap[0];else if(k>0&&d>k){f=d>e?a.errTextMap[4]:a.errTextMap[2];j=k}else if(n)if(i===e&&d<i){f=a.errTextMap[6];j=i}else if(l>0&&l<i){f=a.errTextMap[5];j=e;p=o}else h=false;else h=false;f&&$(m).html($("#"+f).html().replace(a.dummyQty,j).replace(a.anotherfield,p));$(q).toggle(h);$(m).toggle(h);$(g).attr(a.isValid,h?"false":"true");c.publish("QTY_VALIDATION_OUTPUT",{isValid:!h,selectedQty:d})}}},isInteger:function(a){if(a){for(var b=
0,c=a.length;b<c;b++){var g=a.charAt(b);if(!(g>="0"&&g<="9"))return false}return true}else return false}}});
raptor.defineClass("raptor.vi.ActionPanel",function(){var h=false,j,k=false;return{init:function(a){var c=this;c.pubsub=raptor.require("pubsub");c.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler");c.registerPubSubMsgs(a);c.bindClickEventsOnButtons(a);if(a.isSMEInterruptLayer)c.isSMEInterrupt=true},bindClickEventsOnButtons:function(a){var c=this;$("#"+a.binBtnId).click(function(){a.submitURL=a.binURL;if(!h){c.pubsub.publish(c.msgs("VALIDATE_MSKU_VARIATIONS"),{});c.submitBtn(a,a.binBtnId)}return false});
$("#"+a.bestOfferBtnId).click(function(){a.submitURL=a.bestOfferURL;if(!h){c.pubsub.publish(c.msgs("VALIDATE_MSKU_VARIATIONS"),{});c.submitBtn(a,a.bestOfferBtnId)}return false});c.pubsub.subscribe(c.msgs("SUBMIT_CARTBTN"),function(b){c.pubsub.publish(c.msgs("VALIDATE_MSKU_VARIATIONS"),{});c.submitBtn(b)},this);c.pubsub.subscribe(c.msgs("SUBMIT_BINBTN"),function(b){c.submitBtn(b)},this)},registerPubSubMsgs:function(a){var c=this;if(this.pubsub){this.pubsub.subscribe(c.msgs("TOGGLE_QTY_DISPLAY_STATE"),
function(b){this.variationId=b.variationId},this);this.pubsub.subscribe(c.msgs("UPDATE_STP_VALUES"),function(b){this.updateStpOverlay(a,b)},this);this.pubsub.subscribe("_WARRANTY_SELECTED",function(b){this.isWrty=b.isWrty},this);this.pubsub.subscribe("BYPASS_SME_BIN_INTERRUPT",function(b){this.isSMEInterrupt=b.isSMEInterrupt;$("#"+b.binBtnId).trigger("click")},this)}},updateStpOverlay:function(a,c){if($("#"+a.qtyBoxId).attr("disabled")){$("#orgPrc").html(a.isModel.originalRetailPrice?a.isModel.originalRetailPrice:
"");var b=a.isModel.amtSaved;if(a.isModel.savingsPercent)if(a.isRedesign)b=a.isModel.savingsPercent+"% off";else b+=" ("+a.isModel.savingsPercent+"%)";$("#youSaveSTP").html(b?b:"");$("#prcIsum").html(a.isModel.binPrice?a.isModel.binPrice:"")}else{$("#orgPrc").html(c.retailPrice?c.retailPrice:"");$("#youSaveSTP").html(c.amtSaved?c.amtSaved:"");$("#prcIsum").html(c.binPrice?c.binPrice:"")}},submitBtn:function(a,c){var b=this;if(a){var e=a.submitURL;if(e){var f=$("#"+a.qtyBoxId);if(f&&f.length>0)if($(f).attr(a.isValid)===
"true"){var i=a.isBulkCart?"qty":$(f).attr("name"),g=$(f).val();e=a.submitURL+"&"+(i+"="+g);try{if(typeof b.variationId=="undefined"){var d=$("#sel-msku-variation");if(typeof d!=="undefined")if(d!=null)if(d&&d.html().length>0&&d.html()!="-1")b.variationId=d.html()}}catch(l){}if(b.variationId)e+="&var="+b.variationId;if(c==a.binBtnId&&a.isSMEInterruptLayer)if(b.isSMEInterrupt){b.pubsub.publish("SME_BIN_INTERRUPT",{binBtnId:a.binBtnId});return false}else b.isSMEInterrupt=true;if(b.isWrty){b.pubsub.publish("_WARRANTY",
{vQty:g,btnId:a.binBtnId});return false}if(a.binEnabled=="t"&&c==a.binBtnId){b.pubsub.publish(b.msgs("BIN_SVC_ID"),{vQty:g,vId:b.variationId?b.variationId:""});return false}if(a.bolEnabled=="t"&&c==a.bestOfferBtnId){b.pubsub.publish(b.msgs("BEST_OFFER_SVC_ID"),{vQty:g});return false}top.location=e}else return false;else{try{if(typeof b.variationId=="undefined"){d=$("#sel-msku-variation");if(typeof d!=="undefined")if(d!=null)if(d&&d.html().length>0&&d.html()!="-1")b.variationId=d.html()}}catch(m){}if(b.variationId)e+=
"&var="+b.variationId;if(c==a.binBtnId&&a.isSMEInterruptLayer)if(b.isSMEInterrupt){b.pubsub.publish("SME_BIN_INTERRUPT",{binBtnId:a.binBtnId});return false}else b.isSMEInterrupt=true;if(b.isWrty){b.pubsub.publish("_WARRANTY",{vQty:"",btnId:a.binBtnId});return false}if(a.binEnabled=="t"&&c==a.binBtnId){b.pubsub.publish(b.msgs("BIN_SVC_ID"),{vQty:"",vId:b.variationId?b.variationId:""});return false}if(a.bolEnabled=="t"&&c==a.bestOfferBtnId){b.pubsub.publish(b.msgs("BEST_OFFER_SVC_ID"),{vQty:""});return false}top.location=
e}}}return false}}});
raptor.defineClass("com.ebay.raptor.vi.VIButton",function(){return{init:function(a){var b=this;b.cfg=a;$("#"+a.btnId).mousedown(function(){$("#"+a.btnId).addClass(a.mouseDownClass)});$("#"+a.btnId).bind("mouseup mouseout",function(){$("#"+a.btnId).removeClass(a.mouseDownClass)})},disable:function(){var a=this,b=a.cfg;b&&$("#"+b.btnId).addClass("d").attr("disabled","disabled")},enable:function(){var a=this,b=a.cfg;b&&$("#"+b.btnId).removeClass("d").removeAttr("disabled")}}});
raptor.defineClass("ebay.viewItem.Cart",function(){return{init:function(a){var b=this;b.pubsub=raptor.require("pubsub");b.conf=a;b.olayCloseSvcId="_OLY_CLS_SVC";b.actionPanel=raptor.require("raptor.vi.ActionPanel");b.cookie=raptor.require("ebay.cookies");b.pubsub=raptor.require("pubsub");b.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler");b.registerPubSubEvents(a);b.attachBtnClickEvent();b.attachMsgHandler()},registerPubSubEvents:function(a){var b=this;this.pubsub.subscribe(b.msgs("HIDE_ADD_TO_CART_LINK"),
function(c){this.hideAddToCartLink(a,c.toHide)},this);this.pubsub.publish(b.msgs("VALIDATE_CART_MODULE_READY"),{})},hideAddToCartLink:function(a,b){if(b){$("#"+a.cartBtnId).show();$("#"+a.cartBtnId).parent().show();$("#atcLnk").hide()}else{$("#"+a.cartBtnId).hide();$("#"+a.cartBtnId).parent().hide();$("#atcLnk").show()}},attachBtnClickEvent:function(){var a=this,b=a.conf,c=b.isBulkCart?true:false,d={qtyBoxId:"qtyTextBox",submitURL:b.cartUrl,isValid:"isValid",isBulkCart:c};$("#"+b.cartBtnId).click(function(){a.pubsub&&
a.pubsub.publish("_SUBMIT_CARTBTN",d);return false})},attachMsgHandler:function(){var a=this;a.pubsub.channel(a.conf.cartOlayId).subscribe(a.olayCloseSvcId,function(b){a.cartOverlayClose(b)},a)},cartOverlayClose:function(){var a=this,b=a.cookie.readCookie("dp1","pbf");a.cookie.writeCookielet("dp1","pbf",a.cookie.setBitFlag(b,66,1))}}});
raptor.defineClass("ebay.viewItem.Incentives",function(){return{init:function(a){var b=this;b.conf=a;b.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil");b.pubsub=raptor.require("pubsub");a.isRewardsCall&&b.makeRewardsCall()},makeRewardsCall:function(){var a=this,b=a.conf;if(b.rewardsUrl){var c=b.rewardsUrl+"&item="+b.itemId;a.ajaxRequest(c)}},ajaxRequest:function(a){var b=this;b.ajaxUtil.getJSON(a,b.processResponse,b)},processResponse:function(a){var b=this,c=b.conf;if(a){a.css&&b.ajaxUtil.extractInlineCss(a.css);
if(!a.eBayIncentiveOfferMsg){if(c.isShowNectarPoints){a.nectarMainMsg&&b.paintHtml(a.nectarMainMsg,c.rewardsDiv);if(a.nectarOverlayContent){$("#vi-inc-nector-msg").html(a.nectarOverlayContent);b.pubsub.publish("_BIND_OLAY",{cmpId:"vi-inc-nector-msg-oly",trigger:"nectarDetails"})}}else a.ebayBucksMsg&&c.isRewardsJSON&&b.paintHtml(a.ebayBucksMsg,c.rewardsDiv);a.bmlPromotionMsg&&b.paintHtml(a.bmlPromotionMsg,c.bmlDiv);if(a.ebayIncentivesMsg){b.paintHtml(a.ebayIncentivesMsg,c.couponDiv);if(a.ebayOverlayIncentiveMsg){$("#vi-inc-coupn-msg").html(a.ebayOverlayIncentiveMsg);
b.pubsub.publish("_BIND_OLAY",{cmpId:"vi-inc-cpn-msg",trigger:"couponshowmehow"})}}}if(a.bmlPromotionMsg||a.ebayIncentivesMsg||a.ebayBucksMsg||a.nectarMainMsg)b.showIncentivesDiv();b.pubsub.publish("_INCENTIVES_RETURNED");b.attachIncentivesClickEvents()}},paintHtml:function(a,b){$("#"+b).html(a)},showIncentivesDiv:function(){var a=this;$("#"+a.conf.incentiveDiv).show()},attachIncentivesClickEvents:function(){var a=this;$("#downArrow").click(function(){a.toggleRewardsDetailsDiv()});$("#upArrow").click(function(){a.toggleRewardsDetailsDiv()});
$("#rwrdMoreLnk").click(function(){a.toggleRewardsDetailsDiv()})},toggleRewardsDetailsDiv:function(){$("#textDiv").toggle();$("#detailsDiv").toggle()}}});
raptor.defineClass("ebay.viewItem.AddToList",function(){var l={};l.msg={CLS_OVERLAY_MSG:"_CLOSE_OLAY"};return{init:function(b){var a=this;a.conf=b;a.openDropDown=false;a.isWatchDisabled=b.atwDisabled;a.pubsub=raptor.require("pubsub");a.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil");a.msgs=raptor.require("com.ebay.raptor.vi.MsgHandler");if(a.pubsub){a.pubsub.subscribe(a.msgs("ADD_TO_WATCH_LNK"),function(e){a.handleWatchLinkClick(e)},a);a.pubsub.subscribe(a.msgs("TRIGGER_REMOVE_SVC_ID"),function(e){a.removeFromList(e)},
a);var c;try{c=raptor.require("com.ebay.raptor.vi.topmessagepanel.ListPanel")}catch(d){}a.isTopListPanel=c?true:false;if(b.msku)a.pubsub.subscribe("MSKU_USER_LIST_UPDATE",function(e){a.handleMskuUpdates(e)},a);else a.isTopListPanel&&a.triggerTopListPanel(false);a.pubsub.publish(a.msgs("VALIDATE_LIST_MODULE_READY"),{})}a.handlrBinded||a.bindHandlr()},handleMskuUpdates:function(b){var a=this,c=a.conf,d=[];if(b.isWatched){a.disableWatchList();d.push({listId:c.watchListId,listName:c.watchName,isWatchList:true,
isWishList:false,listURL:c.myEbayWatchListUrl})}else a.enableWatchList();a.updateVariationAndLists(b,d);a.isTopListPanel&&a.triggerTopListPanel(true,d)},triggerTopListPanel:function(b,a){var c=this,d=c.conf,e=d.isUserSignedIn?true:false;if(b)c.pubsub.publish("STATUS_PANEL_LIST_SVC_INIT",{listDetails:a,isOnLoad:true,isMSKU:true,isSignedIn:e});else{a=[];for(var f=d.userListModel.listMenus,i="",g=false,h=0;h<f.length;h++)if(f[h].disabled)if(f[h].watchList)!f[h].full&&!d.isItemEnded&&a.push({listId:f[h].listId,
listName:f[h].listName,isWatchList:true,isWishList:false,listURL:d.myEbayWatchListUrl});else{i=d.myEbayOtherListBaseUrl+"&tagname="+f[h].listName+"&tagId="+f[h].listId;g=f[h].listId==d.wishListId?true:false;a.push({listId:f[h].listId,listName:f[h].listName,isWatchList:false,isWishList:g,listURL:i})}c.pubsub.publish("STATUS_PANEL_LIST_SVC_INIT",{listDetails:a,isOnLoad:true,isMSKU:false,isSignedIn:e})}},updateVariationAndLists:function(b,a){var c=this,d=c.conf;c.variationId=b.variationId;var e=d.userListModel.listMenus,
f="",i=false;if(c.variationId)for(var g=0;g<e.length;g++)if(!e[g].watchList){var h=d.userListModel.variationMap;if(h!=null){if(h[c.variationId]==null)c.disableEnableList(e[g].listId,false,false);else{var j=false;if(jQuery.inArray(e[g].listId,h[c.variationId])>=0)j=true;c.disableEnableList(e[g].listId,j,false);if(j){f=d.myEbayOtherListBaseUrl+"&tagname="+e[g].listName+"&tagId="+e[g].listId;i=e[g].listId==d.wishListId?true:false;a.push({listId:e[g].listId,listName:e[g].listName,isWatchList:false,isWishList:i,
listURL:f})}}c.disableEnableList(e[g].listId,j,false)}}return a},updateVariationMap:function(b,a){var c=this,d=c.conf,e=d.userListModel.variationMap;if(b){if(d.msku&&c.variationId)if(a)e!=null&&jQuery.inArray(b,e[c.variationId])>=0&&e[c.variationId].splice($.inArray(b,e[c.variationId]),1);else if(e!=null){if(e[c.variationId]==null)e[c.variationId]=[];e[c.variationId].push(b)}else{e={};e[c.variationId]=[b]}c.conf.userListModel.variationMap=e}},bindHandlr:function(){var b=this;b.handlrBinded=true;b.bindTriggerEvent()},
bindTriggerEvent:function(){var b=this,a=b.conf;$("#"+a.atlBtnId).click(function(c){b.handleAddToWatchButtonClick(c);return false});$("#"+a.atlArrId).click(function(c){b.toggleDropDown(c)});$("#"+a.drpdwnListId).click(function(c){b.handleDropdownClick(c)});if(a.addToNewDisabled)$("#"+a.atnId).bind("click",function(c){b.toggleDropDown(c)});else{$("#"+a.atnId).bind("click",function(){b.showCreateNewOverlay()});b.attachAddToNewListEvents()}},handleAddToWatchButtonClick:function(b){var a=this;if(a.isWatchDisabled)a.toggleDropDown(b);
else{var c=b.target||b.srcElement;if(c.href)a.listElemId=c.id;a.addToWatch()}},handleWatchLinkClick:function(b){var a=this;if(b.status)b.addRequest?a.addToWatch(true,b.watchLink):a.disableWatchList();else a.enableWatchList()},toggleDropDown:function(b){var a=this,c=a.conf;a.pubsub.publish("HIDE_DROPDOWN",{});if(a.openDropDown){$("#"+c.drpdwnLayerId).hide();$("html").unbind("click",function(){a.hideLayer()});$("#"+c.drpdwnLayerId).unbind("click",function(d){d.stopPropagation()});a.openDropDown=false}else{a.pubsub.publish(a.msgs("FORCE_CLOSE_OVERLAY"),
{hideOnly:true});$("#"+c.drpdwnLayerId).show();a.checkDropDownWidth();b.stopPropagation();$("html").bind("click",function(){a.hideLayer()});$("#"+c.drpdwnLayerId).bind("click",function(d){d.stopPropagation()});a.openDropDown=true}},checkDropDownWidth:function(){var b=this,a=b.conf;$("#"+a.drpdwnLayerId).css("width","auto");$.browser.msie&&$.browser.version<8&&$("#"+a.drpdwnLayerId).css({position:"relative",visibility:"hidden"});var c=$("#"+a.drpdwnLayerId).width();if(c<a.drpdwnMinWidth)c=a.drpdwnMinWidth;
else if(c>a.drpdwnMaxWidth)c=a.drpdwnMaxWidth;$("#"+a.drpdwnLayerId).width(parseInt(c));$("#"+a.atnId).css({"max-width":parseInt(c)-2,"white-space":"normal"});$.browser.msie&&$.browser.version<8&&$("#"+a.drpdwnLayerId).css({position:"absolute",visibility:""})},hideLayer:function(){var b=this,a=b.conf;if(b.openDropDown){$("#"+a.drpdwnLayerId).hide();b.openDropDown=false}},handleDropdownClick:function(b){var a=this,c=a.conf,d=b.target||b.srcElement;if(d.href==="javascript:;"){var e=d.getAttribute("ds");
if(e&&e!=="true"||!e){a.listElemId=d.id;d.getAttribute("i")==c.watchListId?a.addToWatch():a.addToList()}}a.toggleDropDown(b)},addToWatch:function(b,a){var c=this,d=c.conf;c.pubsub.publish("HIDE_DROPDOWN",{});c.pubsub.publish(c.msgs("VALIDATE_MSKU_VARIATIONS"),{});c.pubsub.publish("ADD_TO_WATCH_TRIGGERED",{});var e="";if(b)e=c.variationId?a+"&var="+c.variationId+"&entityInfo="+c.variationId+"^VARIATION":a;else{e=c.variationId?d.addToWatchUrl+"&var="+c.variationId+"&entityInfo="+c.variationId+"^VARIATION":
d.addToWatchUrl;var f=$("#"+c.listElemId);e=e+"&tagId="+f.attr("i")+"&etn="+f.attr("n")}if(!d.msku||d.msku&&c.variationId)if(d.isUserSignedIn){c.isWatchRequest=true;c.sendRequest(e);c.pubsub.publish(c.msgs("VARIATION_EDIT_WATCH_STATUS"),{variationId:c.variationId,variationWatched:true})}else top.location.href=e},addToList:function(){var b=this,a=b.conf,c="&_trsksid=";b.pubsub.publish(b.msgs("VALIDATE_MSKU_VARIATIONS"),{});var d=$("#"+b.listElemId);if(d.attr("t")&&d.attr("t")=="wish"){b.isWishRequest=
true;c+=a.wishListTrackingParam}else c+=a.otherListTrackingParam;var e=b.variationId?a.myEbayBaseUrl+"&var="+b.variationId+"&entityInfo="+b.variationId+"^VARIATION":a.myEbayBaseUrl;e=e+"&tagId="+d.attr("i")+"&etn="+d.attr("n")+c;if(!a.msku||a.msku&&b.variationId)if(a.isUserSignedIn){b.updateVariationMap(d.attr("i"),false);b.sendRequest(e)}else top.location.href=e},removeFromList:function(b){var a=this;(b=a.getRemoveListURL(b.listDetails))&&a.sendRequest(b)},getRemoveListURL:function(b){var a=this,
c=a.conf,d="",e=false,f=true;if(b){if(b.length>1)f=false;d+=c.msku?"&entityId="+a.variationId+"&LineID=VariationId^"+c.itemId+"_"+a.variationId:"&entityId="+c.itemId;if(f)d+="&tagId="+b[0].listId;for(var i=0;i<b.length;i++){if(b[i].isWatchList){e=true;a.enableWatchList();c.msku&&a.pubsub.publish(a.msgs("VARIATION_EDIT_WATCH_STATUS"),{variationId:a.variationId,variationWatched:false})}else a.disableEnableList(b[i].listId,false,false);a.updateVariationMap(b[i].listId,true)}if(!f&&e)d+="&inwl=true";
else if(!f&&!e)d+="&inwl=false"}return c.removeListUrl+d},sendRequest:function(b){var a=this;a.ajaxUtil.getJSON(b,a.processResponse,a)},processResponse:function(b){var a=this;if(b&&b.status){if(!(b.listDetails[0]&&b.listDetails[0].listId))b.listDetails=eval(b.listDetails);var c=b.action;switch(c){case 0:a.createNewListResponseHandler(b);break;case 1:a.isWatchRequest?a.addToWatchResponseHandler(b):a.addToListResponseHandler(b)}}else a.errorMsg(b)},addToWatchResponseHandler:function(b){var a=this,c=
a.conf,d=b.listDetails[0],e=c.isUserSignedIn?true:false;d.maxLimitReached&&a.handleListMaxError(d,true);a.disableWatchList();a.pubsub.publish(a.msgs("LIST_ADD_SVC_ID"),{listDetails:[{listId:d.listId,listName:d.listName,isWatchList:true,isWishList:false,listURL:c.myEbayWatchListUrl}],isSignedIn:e});a.isWatchRequest=false},addToListResponseHandler:function(b){for(var a=this,c=a.conf,d=c.isUserSignedIn?true:false,e=[],f="",i=0;i<b.listDetails.length;i++){var g=b.listDetails[i],h=g.listId;g.maxLimitReached&&
a.handleListMaxError(g,false);var j="";if(a.isWishRequest){a.disableEnableList(c.wishListId,true,false,c.addedToWishListTxt);j=$("div#"+c.drpdwnListId+'> ul > li >a[i="'+c.wishListId+'"]').parent();f=c.myEbayOtherListBaseUrl+"&tagname="+g.listName+"&tagId="+g.listId;e.push({listId:g.listId,listName:g.listName,isWatchList:false,isWishList:true,listURL:f})}else{a.disableEnableList(g.listId,true,false,c.statusMsgTxt.replace("$",a.limitCharText(b.listDetails[0].listName)));j=$("div#"+c.drpdwnListId+'> ul > li >a[i="'+
g.listId+'"]').parent();f=c.myEbayOtherListBaseUrl+"&tagname="+g.listName+"&tagId="+g.listId;e.push({listId:g.listId,listName:g.listName,isWatchList:false,isWishList:false,listURL:f})}$($("#"+c.drpdwnListId+">ul").children()[0]).after(j)}a.pubsub.publish(a.msgs("LIST_ADD_SVC_ID"),{listDetails:e,isSignedIn:d});a.isWishRequest=false},handleListMaxError:function(b,a){var c=this,d=c.conf,e="";if(c.isWishRequest){e=$("div#"+d.drpdwnListId+'> ul > li >a[i="'+d.wishListId+'"]');e.text(d.wishListFullTxt)}else{e=
$("div#"+d.drpdwnListId+'> ul > li >a[i="'+b.listId+'"]');a?e.text(d.watchListFullTxt):e.text(d.otherListFullTxt.replace("$",c.limitCharText(b.listName)))}},disableWatchList:function(){var b=this,a=b.conf;b.pubsub.publish(b.msgs("ADD_TO_WATCH_BTN"),{status:true});b.disableEnableList(a.watchListId,true,true,a.addedToWatchListTxt)},enableWatchList:function(b){var a=this;a.disableEnableList(a.conf.watchListId,false,true,b);a.pubsub.publish(a.msgs("ADD_TO_WATCH_BTN"),{status:false})},enableAllLists:function(){for(var b=
this,a=$("#atl_drpdwnListId>ul").find("li>a"),c=0;c<a.length;c++)b.disableEnableList($(a[c]).attr("i"),false,false)},disableEnableList:function(b,a,c,d){var e=this,f=e.conf,i=$("div#"+f.drpdwnListId+'> ul > li >a[i="'+b+'"]');if(a){if(c){e.isWatchDisabled=true;$("#"+f.atlBtnId).html('<a href="javascript:;">'+f.atwAltCaption+"</a>");try{$("#vi_oly_atwlstovly .clz").trigger("click")}catch(g){}}i.attr("ds","true");i.attr("class","ul-ds");d&&e.showStatusMsg(d)}else{if(c){e.isWatchDisabled=false;$("#"+
f.atlBtnId+" > a").html(f.btnDefDispName)}i.removeAttr("ds","true");i.removeClass("ul-ds");$("#"+f.statusMsgId).hide()}},showStatusMsg:function(b){var a=this,c=a.conf;$("#"+c.statusMsgContId).html(b);$("#"+c.statusMsgId).show()},showCreateNewOverlay:function(){var b=this,a=b.conf;b.pubsub.publish(b.msgs("VALIDATE_MSKU_VARIATIONS"),{});if(!a.msku||a.msku&&b.variationId)if(a.addnewOverlayId){b.pubsub.publish("_OPEN_OLAY",{cmpId:a.addnewOverlayId});$("#"+a.addtoNewDivErrId).hide();$("#"+a.addtoNewDefErrId).hide();
$("#"+a.addtoNewRespErrId).hide()}b.toggleDropDown();$("html").bind("click",function(){b.closeAddNewOverlay()});$("#"+a.addnewOverlayId).bind("click",function(c){c.stopPropagation()})},attachAddToNewListEvents:function(){var b=this,a=b.conf;$("#"+a.addtoNewBtnId).click(function(){b.createNewListRequest()});$("#"+a.cancelBtnId).click(function(){b.closeAddNewOverlay()});$("#"+a.addtoNewInputId).focus(function(){b.toggleAddToNewListInputTxt(true)});$("#"+a.addtoNewInputId).blur(function(){b.toggleAddToNewListInputTxt(false)})},
createNewListRequest:function(){var b=this,a=b.conf,c="&_trsksid="+a.otherListTrackingParam,d=$("#"+a.addtoNewInputId);if(d.val()!=a.addtoNewInputTxt&&$.trim(d.val())!=""){a=a.myEbayBaseUrl+"&tagName="+d.val();if(b.variationId)a+="&var="+b.variationId+"&entityInfo="+b.variationId+"^VARIATION";a+=c;b.sendRequest(a)}else{d.val(a.addtoNewInputTxt);b.showDefCreatNewErr()}},createNewListResponseHandler:function(b){for(var a=this,c=a.conf,d=c.isUserSignedIn?true:false,e=0,f=[],i="",g=0;g<b.listDetails.length;g++){var h=
b.listDetails[g];if(h.itemAdded){var j=a.listElemId="atl_"+h.listId,k=c.addtoReplaceTxt.replace("$",h.listName);k=a.limitCharText(k);c.msku&&a.variationId&&a.updateVariationMap(h.listId,false);$($("#"+c.drpdwnListId+">ul").children()[0]).after("<li><a n="+h.listName+" i="+h.listId+" id="+j+" ds='true' class='ul-ds' href=javascript:;>"+k+"</a></li>");e++;i=c.myEbayOtherListBaseUrl+"&tagname="+h.listName+"&tagId="+h.listId;f.push({listId:h.listId,listName:h.listName,isWatchList:false,isWishList:false,
listURL:i})}}a.pubsub.publish(a.msgs("LIST_ADD_SVC_ID"),{listDetails:f,isSignedIn:d});var m=e>1?c.statusMsgTxtMulti.replace("$",e):c.statusMsgTxt.replace("$",a.limitCharText(h.listName));a.closeAddNewOverlay();a.showStatusMsg(m);a.checkMaxLists(b.listCount)},checkMaxLists:function(b){var a=this,c=a.conf;if(b>=c.maxListsAllowed){$("#"+c.atnId).unbind("click");$("#"+c.atnId).bind("click",function(d){a.toggleDropDown(d)});$("#"+c.atnId+">a").attr("ds","true");$("#"+c.atnId+">a").addClass("atnDs")}},
errorMsg:function(b){var a=this,c=a.conf;$("#"+c.addtoNewDivErrId).show();$("#"+c.addtoNewDefErrId).hide();if(b.topErrorMsg){var d=$("#"+c.addtoNewRespErrId);d.html(b.topErrorMsg);d.show()}if(b.bottomErrorMsg){$("#"+c.addtoNewBtmErrId).html(b.bottomErrorMsg);$("#"+c.addtoNewBtmErrId).show()}},showDefCreatNewErr:function(){var b=this,a=b.conf;$("#"+a.addtoNewDivErrId).show();$("#"+a.addtoNewDefErrId).show();$("#"+a.addtoNewRespErrId).hide();$("#"+a.addtoNewBtmErrId).hide()},toggleAddToNewListInputTxt:function(){var b=
this,a=b.conf,c=$("#"+a.addtoNewInputId);if(c.val()==a.addtoNewInputTxt)c.val("");else c.val()==""&&c.val(a.addtoNewInputTxt)},limitCharText:function(b){var a=this,c=a.conf,d=c.charLimit;if(b&&b.length>d)return b.substring(0,d).concat(c.ellipses);return b},closeAddNewOverlay:function(){var b=this,a=b.conf;$("#"+a.addtoNewInputId).val(a.addtoNewInputTxt);$("html").unbind("click",function(){b.closeAddNewOverlay()});b.pubsub.publish(l.msg.CLS_OVERLAY_MSG,{cmpId:a.addnewOverlayId})}}});
raptor.defineClass("ui.Tab",function(){return{events:["select"],init:function(h){var b=this,a=$("#"+h.id),c=0,d=0,e=a.children(".tab"),i=a.children(".content"),f=e.find("a.item");f.each(function(){c+=$(this).width()+10});a.css("min-width",c+150);i.length!=0&&f.each(function(){var g=$(this);g.attr("idx",d);d++;g.click(function(){a.children(".content.sel").removeClass("sel");e.find(".item.sel").removeClass("sel");$("#"+this.id+"_cnt").addClass("sel");$(this).addClass("sel");b.publish("select",{index:$(this).attr("idx"),
source:b})})})}}});
raptor.defineClass("com.ebay.raptor.vi.ItemAttributes",function(){return{init:function(a){$("#"+a.readMoreId).one("click",function(){$(document).trigger("rover",{sid:"p2047675.l2779"});$("#"+a.hiddenContentId).show();$("#"+a.readMoreId).hide()})}}});
raptor.defineClass("com.ebay.raptor.vi.Description",function(){return{init:function(a){var b=this;b.cfg=a;b.tId="";b.bSwap=false;if(typeof window.postMessage=="function"){window.addEventListener?window.addEventListener("message",function(d){b.rcvMsg(d)},false):window.attachEvent("onmessage",function(d){b.rcvMsg(d)},false);var c=document.getElementById("desc_ifr");c&&!b.executed&&c.contentWindow.postMessage("resizeIframe","*")}else b.startTimer();b.frameBuster(window.location.href);b.pubsub=raptor.require("pubsub");
b.pubsub.subscribe("_RESET_FRAME_RESIZE_FLAG",function(){b.executed=false},b)},startTimer:function(){var a=this;a.tId=window.setTimeout(function(){a.checkMsg()},1E3)},checkMsg:function(){var a=this,b,c=window.location.hash;if(c!=="")b=a.parseData(c);else if(c===""||typeof c==="undefined")a.startTimer();b&&b[0]!==0&&a.resizeFrm(b)},parseData:function(a){var b=[0,0],c=a,d=c.indexOf("ht_"),e=c.indexOf("wt_");d=c.substring(d+3,e);e=c.substring(e+3);b[0]+=Number(d);b[1]+=Number(e);return b},resizeFrm:function(a){var b=
$.browser,c=document.getElementById("desc_ifr");b=b.mozilla?24:54;self.tId!==""&&window.clearTimeout(self.tId);if(!isNaN(a[0])){if(typeof a[0]!=="undefined"&&a[0]>0)c.height=a[0]+b;if(!isNaN(a[1]))if(typeof a[1]!=="undefined"&&a[1]>0){c.width=a[1];this.extendDescContainer(c,a)}}},extendDescContainer:function(a,b){var c=$("#desc_out_cr");if(c&&c.length>0){a=$(a);var d=b[1],e=$("#storeHeader"),g=$(document.body).hasClass("sz980"),h=$(document.body).hasClass("sz1200");if(e&&e.length>0)d+=e.outerWidth();
if(g&&d>938||h&&d>1158){c.css({width:d+"px"});var f={};e=$("#itm_num");f.imp="2047686";f.bh=b[0];f.bw=d;if(e.length>0)f.itm=e.html();$(document).trigger("rover",f)}}},rcvMsg:function(a){var b=this,c=[];if(!(a.origin!==b.cfg.tgto||b.executed)){a=JSON.parse(a.data);c[0]=parseInt(a.h);c[1]=parseInt(a.w);c[2]=a.t;c[3]=a.s;c[4]=a.e;b.resizeFrm(c);b.ondemandTransl(c);if(!c[4])b.executed=true}},frameBuster:function(){top.location!=self.location&&top.location.replace(psUrl)},ondemandTransl:function(a){var b=
this;if(a[2]&&a[2]!==""){if(b.bSwap){$(".it-icon-pd").insertAfter($("#itemTitle"));b.bSwap=false}$("#itemTitle").html(a[2]);if(a[2].match(/text-align:right/)){$("#itemTitle").find("p:first").addClass("it-mrg0");if($(".it-icon-pd")){$("#itemTitle").find("p:first").prepend($(".it-icon-pd"));b.bSwap=true}}}if(a[3]&&a[3]!=="")st=$("#subTitle").html(a[3])}}});
raptor.defineClass("com.ebay.raptor.vi.bid.BidLayer",function(){return{init:function(a){var e=this,b=raptor.require("pubsub");if(b){b.subscribe(a.svcId,function(c){if(c&&!c.isRedirect){var d=this.getChild(a.overlayId);if(d){d.show();try{$("#"+a.overlayId).parent().css("marginTop","-50px");$("#"+a.overlayId).parent().parent().siblings(".clz").css("marginTop","-15px")}catch(f){}}}},e);a.openOnLoad&&$(document).ready(function(){b.publish(a.invokeClkId,{})})}}}});
raptor.defineClass("com.ebay.raptor.vi.bid.Util",function(){var d=function(){};d.updateStatusMsg=function(a,b){if(a!==-1&&b)switch(a){case 0:b.error();break;case 1:b.notice();break;case 2:b.warning();break;case 3:b.confirm()}};d.enablDisableBtn=function(a,b){if(a)b?a.disable():a.enable()};d.displayContent=function(a,b,c,e){if(a&&b){$("#"+a+c).html(b);$("#"+a+e).show()}};d.rmvEvt=function(a){if(a)for(var b=0,c=a.length;b<c;b++)a[b]&&$("#"+a[b]).unbind()};d.isEnterKey=function(a){return a&&a.keyCode==
13};d.showHide=function(a,b){if(a)for(var c=0,e=a.length;c<e;c++)if(a[c])b?$("#"+a[c]).show():$("#"+a[c]).hide()};d.helpPopup=function(a){var b="help",c=screen.width-430;if(a)(a=window.open(a,b,"width=420,height=550,scrollbars=yes,status=no,toolbar=no,location=no,resizable=yes,top=0,screenY=0,left="+c+",screenX="+c))&&a.focus();return false};return d});
raptor.defineClass("com.ebay.raptor.vi.bid.BidUtil",function(){var e=function(){};e.getItemData=function(a){var b;if(a)if(a[0]&&a[0].ViewItemLiteResponse&&a[0].ViewItemLiteResponse.Item&&a[0].ViewItemLiteResponse.Item[0]){b=a[0].ViewItemLiteResponse.Item[0];b.isAutoRefresh=true}return b};e.timeLeftV=function(a){var b,f,c,h,g;if(a){var d=function(i){var j=0;if(i){j=parseInt(i);j=isNaN(j)?0:j}return j};b={day:d(a.DaysLeft),hour:d(a.HoursLeft),minute:d(a.MinutesLeft),second:d(a.SecondsLeft)}}return b};
e.timeLeftFormat=function(a,b,f){var c=" ",h="",g,d,i,j;if(a){g=a.day;d=a.hour;i=a.minute;j=a.second;if(g>0){i=g===1?b.dayTxt:b.dayCharTxt;h+=e.appendTime(g,i,false);if(d>0){g=g===1?d===1?b.hourTxt:b.hoursTxt:b.hourCharTxt;h+=e.appendTime(d,g,false)}}else{h+=f&&d>=1?e.appendTime(d,b.hourCharTxt,false)+e.appendTime(i,b.minuteCharTxt,false):e.appendTime(d,b.hourCharTxt,false)+e.appendTime(i,b.minuteCharTxt,false)+e.appendTime(j,b.secondCharTxt,false,null,true);d<=0&&$("#"+b.cssElemId).addClass(b.css)}return h}};
e.appendTime=function(a,b,f,c,h){var g=f?" ":"";if((a||a===0&&h)&&!isNaN(a)&&(!h&&a>0||h)&&b){if(c&&a<c)a="0"+a;a+=g+$("#"+b).html()+" ";return a}return""};e.decrementOneSec=function(a){var b,f,c;if(a){b=a.hour||0;f=a.minute||0;c=a.second||0;if(c>0)c-=1;else if(c===0&&f>0){f-=1;c=59}else if(c===0&&f===0&&b>0){b-=1;c=f=59}a.second=c;a.minute=f;a.hour=b}return a};e.convertToSeconds=function(a){var b,f=0,c,h,g,d;if(a){c=a.day||0;h=a.hour||0;g=a.minute||0;d=a.second||0;f=c*24*60*60+h*60*60+g*60+d}return f};
e.preload=function(a){$(a).each(function(){$("<img/>")[0].src=this})};return e});
raptor.defineEnum("com.ebay.raptor.vi.bid.enums.BidStatus",["PLACEBID","REVIEWBID","CONFIRMBID","LEGAL","ENDED","ACTIVE"]);
raptor.defineEnum("com.ebay.raptor.vi.bid.enums.BidderStatus",["OUTBIDDER","HIGHBIDDER"]);
raptor.defineEnum("com.ebay.raptor.vi.bid.enums.BidError",["INVALID_BIDAMOUNT","LOW_BIDAMOUNT","INVALID_BIDAMOUNT_OF_HIGH_BIDDER","BUYER_BLOCKED_NO_LINKED_PAYPAL_ACCOUNT","BID_GREATER_THAN_BIN","DECSEP","REDIRECT","REFRESH","AUCTION_ENDED","OFFER_AMOUNT_ZERO"]);
raptor.defineClass("com.ebay.raptor.vi.bid.Bid",function(){return{init:function(a){var b=this;b.pubsub=raptor.require("pubsub");b.util=raptor.require("com.ebay.raptor.vi.bid.Util");b.bidUtil=raptor.require("com.ebay.raptor.vi.bid.BidUtil");b.bidTimeLeft={};b.cfg=a;b.cfg.isGsp=false;if(b.pubsub){b.pubsub.subscribe(a.svcId,function(c){b.bidClick(c)},b);b.pubsub.subscribe(a.counterSvcId,function(c){b.timeCounter(c)},b);b.pubsub.subscribe(a.autoRefreshSvcId,function(c){b.autoRefresh(c)},b)}},timeCounter:function(){var a=
this,b;if(a.bidUtil&&a.overlay&&a.overlay.showing){b=a.bidUtil.decrementOneSec(a.getBidTimeLeft());a.updateTimeLeft(b,true)}},startCounter:function(a,b,c){var d=this,e=d.cfg,f={TimeLeft:a,AccessedDate:b,ViewerItemRelation:c,DetailLevel:e.detailLevel};d.setBidTimeLeft(a);d.pubsub&&d.pubsub.publish(e.counterStartSvcId,f)},autoRefresh:function(a){var b=this;a&&b.overlay&&b.overlay.showing&&b.processResponse(a)},bidVars:function(){var a=this,b=a.cfg;a.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil");
a.BidStatus=raptor.require("com.ebay.raptor.vi.bid.enums.BidStatus");a.BidError=raptor.require("com.ebay.raptor.vi.bid.enums.BidError");a.BidderStatus=raptor.require("com.ebay.raptor.vi.bid.enums.BidderStatus");a.button=a.getChild(b.bidBtnId);a.statusMsg=a.getChild(b.statusMsgId);a.overlay=a.getParent(b.overlayId)},toggleBidEvt:function(a,b){var c=this,d=c.cfg,e=d.enterBidId+d.value,f,g;if(b){c.util.enablDisableBtn(c.button,true);$("#"+d.bidBtnId+d.btn).unbind("click.Bid");$("#"+e).unbind("keypress.Bid")}else{f=
function(){c.triggerCall(a,e)};g=function(h){c.util.isEnterKey(h)&&c.triggerCall(a,e)};c.util.enablDisableBtn(c.button,false);$("#"+d.bidBtnId+d.btn).bind("click.Bid",f);$("#"+e).bind("keypress.Bid",g)}},subscribeOlyClose:function(){var a=this,b=a.cfg;if(a.overlay){var c=a.overlay.conf;if(c&&c.closeSvcId)a.olyCloseHandle=a.pubsub.channel(b.overlayId).subscribe(c.closeSvcId,function(){a.layerCleanUp(b.isRefreshOnClose,b.refreshUrl)},a)}},updateCurrBid:function(a,b,c){var d=this,e=d.cfg;if(a){d.util.displayContent(e.curBidId,
a.MoneyStandard,e.value,e.wrapper);c&&$("#"+e.curBidId+e.lable).html(c)}d.updateApprox(b,e.curBidId)},updateApprox:function(a,b){var c=this,d=c.cfg,e;if(a&&a.MoneyStandard&&b){e=$("#"+d.approxTxt).html().replace(d.dummy,a.MoneyStandard);$("#"+b+d.approx).html(e).show()}},setBidTimeLeft:function(a){self.bidTimeLeft=a},getBidTimeLeft:function(){return self.bidTimeLeft},updateCurrency:function(a){var b=this,c=b.cfg;a&&$("#"+c.enterBidId+c.currencyId).html(a)},closeLayer:function(){var a=this;a.overlay&&
a.overlay.hide()},bidClick:function(){},triggerCall:function(){},processResponse:function(){},updateTimeLeft:function(){},layerCleanUp:function(){}}});
raptor.defineClass("com.ebay.raptor.vi.bid.placebid.PlaceBid",{superclass:"com.ebay.raptor.vi.bid.Bid"},function(){var f=function(){var c=this;f.superclass.init.apply(c,arguments)};f.prototype={bidClick:function(c){var a=this,b=a.cfg,d,e;f.superclass.bidVars.apply(a);if(c){d=c.maxbid;a.shipping=c.shipping;a.impCharge=c.impCharge;e=c.isRedirect}d=d?d:b.maxBidDefVal;a.triggerCall(b.bidInitURL,d,true,e)},triggerCall:function(c,a,b,d){var e=this,g,h;if(c){e.hideAll();e.throbber(true);g=b&&a?a:$("#"+a).val();
if(e.maxBidAmt=g)if(d){h=c.indexOf("?")!==-1?"&":"?";h+=$.param({maxbid:g});c+=encodeURIComponent(h)}else{c+=c.indexOf("?")!==-1?"&":"?";c+=$.param({maxbid:g})}if(d)top.location.href=c;else if(e.ajaxUtil){e.ajaxUtil.getJSON(c,e.processResponse,e);f.superclass.toggleBidEvt.apply(e,["",true])}}},processResponse:function(c){var a=this,b=a.cfg,d;if(c){d=a.BidError.valueOf(c.Error);if(!(d&&a.isRedirectErrors(d,c.ErrorUrl)))if(c.IsEnded){var e=function(){f.superclass.closeLayer.apply(a)};setTimeout(e,2500)}else{if(!c.isAutoRefresh){$("#"+
b.enterBidId+b.value).val("");a.throbber(false)}b=a.BidStatus.valueOf(c.Status);if(c.isAutoRefresh&&a.status)b=a.status;if(b){a.defaultFields(c);if(b==a.BidStatus.PLACEBID)a.placeBid(c);else if(b==a.BidStatus.REVIEWBID)a.reviewBid(c);else b==a.BidStatus.CONFIRMBID&&a.confirmBid(c);c.isAutoRefresh||a.attachLayerEvt(b);a.status=b}a.updateBidAmtError(d)}}},placeBid:function(c){var a=this,b=a.cfg;$("#"+b.bidTitleId).html($("#"+b.placeBidTxt).html());$("#"+b.enterBidId+b.lable).html($("#"+b.yourMaxBidTxt).html());
a.updateMinToBid(c);$("#"+b.enterBidId+b.wrapper).show();$("#"+b.grayArea).show();$("#"+b.nextStepId).show()},reviewBid:function(c){var a=this,b=a.cfg;$("#"+b.bidTitleId).html($("#"+b.reviewBidTxt).html());c.isAutoRefresh||a.updateImportCharge();if(c.MaximumBid&&!c.isAutoRefresh){a.util.displayContent(b.reviewBidId,c.MaximumBid.MoneyStandard,b.value,b.wrapper);$("#"+b.enterBidId+b.value).val(c.MaximumBid.CleanAmount);f.superclass.updateApprox.apply(a,[c.MaximumBidLocal,b.reviewBidId])}c.IsAdminView&&
$("#"+b.reviewBidId+b.wrapper).show();$("#"+b.grayArea).show();a.cfg.isGsp?$("#"+b.disclaimerGspId).show():$("#"+b.disclaimerId).show()},confirmBid:function(c){var a=this,b=a.cfg;$("#"+b.bidTitleId).html($("#"+b.confirmBidTxt).html());if(c.MaximumBid)a.util.displayContent(b.reviewBidId,c.MaximumBid.MoneyStandard,b.value,b.wrapper);else{var d=a.BidderStatus.valueOf(c.ViewerItemRelation);d==a.BidderStatus.OUTBIDDER&&$("#"+b.reviewBidId+b.value).html()&&$("#"+b.reviewBidId+b.wrapper).show()}$("#"+b.enterBidId+
b.lable).html($("#"+b.incMaxBidTxt).html());a.updateMinToBid(c);$("#"+b.enterBidId+b.wrapper).show();$("#"+b.grayArea).show();a.confirmBidMsg(c);!c.isAutoRefresh&&c.ROIUrls&&a.bidUtil.preload(c.ROIUrls)},defaultFields:function(c){var a=this,b;b=c.isAutoRefresh&&!c.TimeLeft?a.bidUtil.timeLeftV({}):a.bidUtil.timeLeftV(c.TimeLeft);a.updateTimeLeft(b);f.superclass.startCounter.apply(a,[b,c.AccessedDate,c.ViewerItemRelation]);a.updateShipping();f.superclass.updateCurrBid.apply(a,[c.CurrentPrice,c.LocalCurrentPrice])},
updateImportCharge:function(){var c=this,a=c.cfg,b=$("#"+c.impCharge).css("display");if(b&&b!="none"){c.cfg.isGsp=true;b=$("#"+a.defaultImpChargeTxt).html();$("#"+a.impChBidTxtId+a.value).hide();$("#"+a.impChBidTxtId+a.value+"Err").hide();c.util.displayContent(a.impChId,b,a.value,a.wrapper);var d=raptor.require("com.ebay.raptor.vi.shipping.CalculateImportCharge");new d({impChIdLink:a.impChId+"Lnk",maxBidAmt:c.maxBidAmt,impChIdCnt:a.impChId+a.value,calcImportChargeUrl:a.calcImportChargeUrl,impChBidTxtId:a.impChBidTxtId+
a.value})}else c.cfg.isGsp=false},updateShipping:function(){var c=this,a=c.cfg,b=c.shipping;b||(b=$("#"+a.defaultShpTxt).html());c.util.displayContent(a.shippingId,b,a.value,a.wrapper)},updateTimeLeft:function(c,a){var b=this,d=b.cfg,e="";$("#"+d.timeLeftId+d.value).removeClass(d.lessTimeCss);if(c){formatCfg={dayTxt:d.dayTxt,dayCharTxt:d.dayCharTxt,hourTxt:d.hourTxt,hoursTxt:d.hoursTxt,hourCharTxt:d.hourCharTxt,minuteCharTxt:d.minuteCharTxt,secondCharTxt:d.secondCharTxt,cssElemId:d.timeLeftId+d.value,
css:d.lessTimeCss};e=b.bidUtil.timeLeftFormat(c,formatCfg,false);a?b.util.displayContent(d.timeLeftId,e,d.value):b.util.displayContent(d.timeLeftId,e,d.value,d.wrapper)}},updateMinToBid:function(c){if(!c.IsAdminView){var a=this,b=a.cfg,d="",e,g=a.BidderStatus.valueOf(c.ViewerItemRelation),h=c.MaximumBid,i=c.MinimumToBid;if(g&&g===a.BidderStatus.HIGHBIDDER&&h){e=b.minBidHBTxt;d=h.MoneyStandard}else if(i){e=b.minBidTxt;d=i.MoneyStandard}$("#"+b.enterBidId+b.min).html($("#"+e).html().replace(b.dummy,
d)).show();f.superclass.updateApprox.apply(a,[c.LocalCurrentPrice,b.curBidId]);c.MinimumToBid&&f.superclass.updateCurrency.apply(a,[c.MinimumToBid.CurrencySymbol])}},attachLayerEvt:function(c){var a=this,b=a.cfg,d=b.enterBidId+b.value,e=b.bidBtnId+b.link;if(c){$("#"+e).unbind();var g=function(h,i,j){$("#"+h+b.btn).val($("#"+i).html());$("#"+h+b.link).html($("#"+j).html())};if(c==a.BidStatus.PLACEBID){g(b.bidBtnId,b.placeBtnTxt,b.cancelTxt);f.superclass.toggleBidEvt.apply(a,[b.placeBidURL,false]);
$("#"+e).bind("click",function(){f.superclass.closeLayer.apply(a)})}else if(c==a.BidStatus.REVIEWBID){g(b.bidBtnId,b.confirmBtnTxt,b.changeTxt);f.superclass.toggleBidEvt.apply(a,[b.confirmBidURL,false]);$("#"+e).bind("click",function(){a.triggerCall(b.bidInitURL,null)})}else if(c==a.BidStatus.CONFIRMBID){g(b.bidBtnId,b.increaseBtnTxt,b.closeTxt);f.superclass.toggleBidEvt.apply(a,[b.bidAgainURL,false]);$("#"+e).bind("click",function(){f.superclass.closeLayer.call(a)})}$("#"+b.bidBtnId+b.wrapper).show();
a.olyCloseHandle||f.superclass.subscribeOlyClose.apply(a);$("#"+d).focus()}},confirmBidMsg:function(c){var a=this,b=a.cfg,d,e=-1,g=a.BidderStatus.valueOf(c.ViewerItemRelation);if(g){if(g==a.BidderStatus.OUTBIDDER){d=b.OUTBIDDER;e=0}else if(g==a.BidderStatus.HIGHBIDDER){e=3;d=c.IsReserve&&!c.IsReserveMet?b.HIGHBIDDER_RESERVE_NOT_MET:c.IsFirstBid?b.HIGHBIDDER_FIRST:c.IsOneMaxBidAway?b.HIGHBIDDER_1_MAX_BID_AWAY:a.lessThanHour(c.TimeLeft)?b.HIGHBIDDER_60_MIN_LEFT:b.HIGHBIDDER}if(d&&e!==-1){a.util.updateStatusMsg(e,
a.statusMsg);a.util.displayContent(b.statusMsgId,$("#"+d).html(),b.value,b.wrapper)}}},isRedirectErrors:function(c,a){var b=this;if(c===b.BidError.REDIRECT){top.location.href=a;return true}else if(c===b.BidError.REFRESH||c===b.BidError.AUCTION_ENDED){f.superclass.closeLayer.apply(b);return true}return false},updateBidAmtError:function(c){var a=this,b=a.cfg,d,e=-1;if(c===a.BidError.DECSEP){d=b.DECSEP;e=0}else if(c===a.BidError.INVALID_BIDAMOUNT){d=b.INVALID_BIDAMOUNT;e=0}else if(c===a.BidError.LOW_BIDAMOUNT){d=
b.LOW_BIDAMOUNT;e=0}else if(c===a.BidError.INVALID_BIDAMOUNT_OF_HIGH_BIDDER){d=b.INVALID_BIDAMOUNT_OF_HIGH_BIDDER;e=0}else if(c===a.BidError.BUYER_BLOCKED_NO_LINKED_PAYPAL_ACCOUNT){d=b.BUYER_BLOCKED_NO_LINKED_PAYPAL_ACCOUNT;e=1}else if(c===a.BidError.BID_GREATER_THAN_BIN){d=b.BID_GREATER_THAN_BIN;e=1}if(d&&e!==-1){a.util.updateStatusMsg(e,a.statusMsg);a.util.displayContent(b.statusMsgId,$("#"+d).html(),b.value,b.wrapper)}},throbber:function(c){var a=this,b=a.cfg;a.util.showHide([b.loadingId,b.resumeBidId],
c)},hideAll:function(){var c=this,a=c.cfg;c.util.showHide([a.loadingId,a.resumeBidId,a.statusMsgId+a.wrapper,a.timeLeftId+a.wrapper,a.shippingId+a.wrapper,a.impChId+a.wrapper,a.curBidId+a.wrapper,a.reviewBidId+a.wrapper,a.enterBidId+a.wrapper,a.confirmBidId+a.wrapper,a.bidBtnId+a.wrapper,a.grayArea,a.disclaimerId,a.disclaimerGspId,a.nextStepId],false)},lessThanHour:function(c){var a=this;if(c=a.bidUtil.timeLeftV(c))return c.day>0||c.hour>1?false:c.hour===1&&(c.minute>1||c.second>1)?false:true;return false},
layerCleanUp:function(c,a){var b=this,d=b.cfg;d=[d.bidBtnId+d.btn,d.bidBtnId+d.link,d.enterBidId+d.value];if(b.util){b.util.rmvEvt(d);if(b.olyCloseHandle){b.olyCloseHandle.unsubscribe();b.olyCloseHandle=null}}if(c&&a)top.location.href=a}};return f});
raptor.defineClass("com.ebay.raptor.vi.shipping.CalculateImportCharge",function(){return{init:function(b){var a=this;a.cfg=b;a.sendGetRatesCall()},sendGetRatesCall:function(){var b=this,a=b.cfg,c=aUrl=a.calcImportChargeUrl;b.ajaxUtil=raptor.require("com.ebay.raptor.vi.AjaxUtil");c||(c=aUrl="http://www.d-sjc-00532519.dev.ebay.com:8080/itm/getrates?item=250002821288&country=3&zipcode=95123");$("#"+a.impChIdLink).click(function(){c=aUrl+"&"+$.param({co:"1",maxBid:a.maxBidAmt});b.triggerCall(c)})},triggerCall:function(b){var a=
this;a.ajaxUtil.getJSON(b,a.handleResponse,a)},handleResponse:function(b){var a=this,c=a.cfg;if(b&&b.impChCost){$("#"+c.impChIdCnt).html(b.impChCost);$("#"+c.impChBidTxtId).show()}else{$("#"+c.impChIdCnt).html("");$("#"+c.impChBidTxtId+"Err").show()}}}});

raptor.defineClass("com.ebay.raptor.vi.bid.oneclick.OneClickBid",{superclass:"com.ebay.raptor.vi.bid.Bid"},function(){var _1=function(_2){var _3=this,helpLink;_1.superclass.init.apply(_3,arguments);helpLink=document.getElementById(_2.learnMoreId);if(helpLink){helpLink.onclick=function(){if(_3.util){_3.util.helpPopup(helpLink.href);}return false;};}};_1.prototype={bidClick:function(_4){var _5=this,cfg=_5.cfg,isRedirect;_1.superclass.bidVars.apply(_5);if(_4){isRedirect=_4.isRedirect;}_5.triggerCall(cfg.bidInitURL,null,isRedirect);$("#"+cfg.updateId+cfg.btn).click(function(){_5.triggerUpdateData(cfg.updateURL);});},triggerUpdateData:function(_6){var _7=this,cfg=_7.cfg;if(_7.ajaxUtil&&_6){_6+=(_6.indexOf("?")!==-1)?"&":"?";_6+=$.param({"lastaccessed":_7.accessedDate||"","lvr":_7.viewerItemRelation,"dl":_7.detailLevel||cfg.detailLevel});_7.ajaxUtil.getJSON(_6,_7.updateData,_7);}},updateData:function(_8){var _9=this,cfg=_9.cfg,response=_9.bidUtil.getItemData(_8);if(response){_1.superclass.autoRefresh.apply(_9,[response]);}},triggerCall:function(_a,_b,_c){var _d=this,cfg=_d.cfg,maxbidVal=$("#"+_b).val(),maxBidParamName=cfg.maxBidParamName;if(_a&&_d.ajaxUtil){if(maxbidVal){_a=_a+"&"+$.param({"maxbid":maxbidVal});}if(_c){top.location.href=_a;return;}else{_d.ajaxUtil.getJSON(_a,_d.processResponse,_d);_1.superclass.toggleBidEvt.apply(_d,["",true]);}}},processResponse:function(_e){var _f=this,cfg=_f.cfg,empty="",error,status,bidderStatus,isReserve,isReserveMet;if(_e){error=_f.BidError.valueOf(_e.Error);if(error&&error==_f.BidError.REDIRECT){top.location.href=_e.ErrorUrl;return;}if(_e.fastDurationInMins){_f.fastDur=_e.fastDurationInMins*60;}status=_f.BidStatus.valueOf(_e.Status);bidderStatus=_f.BidderStatus.valueOf(_e.ViewerItemRelation);isReserve=_e.IsReserve;isReserveMet=_e.IsReserveMet;if(status===_f.BidStatus.LEGAL){_f.setLegal(_e);}else{if(status==_f.BidStatus.ENDED||_e.IsEnded){_f.setEnded(_e,bidderStatus,isReserve,isReserveMet);}else{if(status==_f.BidStatus.ACTIVE||(_e.isAutoRefresh)){_f.setActive(_e,error,bidderStatus,isReserve,isReserveMet);}else{return;}}}if(!_e.isAutoRefresh&&!_e.Error&&_e.ROIUrls){_f.bidUtil.preload(_e.ROIUrls);}if(!_e.isAutoRefresh){_f.pubsub.publish(cfg.olySvcId,{});if(!_f.olyCloseHandle){_1.superclass.subscribeOlyClose.apply(_f);}}}},layerCleanUp:function(_10,_11){var _12=this,cfg=_12.cfg,idList=[cfg.enterBidId+cfg.value,cfg.bidBtnId+cfg.btn,cfg.updateId+cfg.btn,cfg.closeId+cfg.value];_12.util.rmvEvt(idList);if(_12.olyCloseHandle){_12.olyCloseHandle.unsubscribe();_12.olyCloseHandle=null;}if(_10&&_11){top.location.href=_11;}},setLegal:function(_13){return;},setEnded:function(_14,_15,_16,_17){var _18=this,cfg=_18.cfg,currBidLable=$("#"+cfg.winningBidTxt).html(),idArr=[cfg.timeLeftId+cfg.wrapper,cfg.enterBidId+cfg.wrapper,cfg.disclaimerId,];_1.superclass.updateCurrBid.apply(_18,[_14.CurrentPrice,_14.LocalCurrentPrice,currBidLable]);_18.endedItemStatus(_15,_16,_17,_14.IsSold);_18.updateMaxBid(_14);_18.util.showHide(idArr,false);_18.showCloseBtn(cfg.closeId,$("#"+cfg.closeTxt).html());},endedItemStatus:function(_19,_1a,_1b,_1c){var _1d=this,cfg=_1d.cfg,msgId,msgType=-1,flashClz,currBidLable;if(_19){if((_19===_1d.BidderStatus.HIGHBIDDER&&!_1a)||(_19==_1d.BidderStatus.HIGHBIDDER&&_1a&&_1b)){msgId=cfg.AUCTION_ENDED_WINNER;msgType=3;flashClz=cfg.successClz;}else{if(_19===_1d.BidderStatus.OUTBIDDER&&!_1a){msgId=cfg.AUCTION_ENDED_OUTBID;msgType=2;flashClz=cfg.warningClz;}else{if((_19===_1d.BidderStatus.OUTBIDDER||_19===_1d.BidderStatus.HIGHBIDDER)&&_1a&&!_1b){msgId=cfg.AUCTION_ENDED_RESERVE_NOT_MET;msgType=1;if(!_1c){currBidLable=$("#"+cfg.startingBidTxt).html();if(currBidLable){$("#"+cfg.curBidId+cfg.lable).html(currBidLable);}}}}}_1d.showStatus(msgId,msgType,flashClz);}},showCloseBtn:function(_1e,_1f){var _20=this,cfg=_20.cfg,close;$("#"+_1e+cfg.value).remove();close=$(document.createElement("input")).attr({id:_1e+cfg.value,type:"button",value:_1f});$("#"+_1e+cfg.wrapper).append(close).show();$("#"+_1e+cfg.value).click(function(){_1.superclass.closeLayer.apply(_20);});},setActive:function(_21,_22,_23,_24,_25){var _26=this,cfg=_26.cfg,timeLeft;if(_22){_26.updateBidAmtError(_22);}else{_26.activeItemStatus(_23,_24,_25,_21.isAutoRefresh);}timeLeft=_26.bidUtil.timeLeftV(_21.TimeLeft);_26.updateTimeLeft(timeLeft);_26.accessedDate=_21.AccessedDate;_26.viewerItemRelation=_21.ViewerItemRelation;_1.superclass.startCounter.apply(_26,[timeLeft,_21.AccessedDate,_21.ViewerItemRelation]);_1.superclass.updateCurrBid.apply(_26,[_21.CurrentPrice,_21.LocalCurrentPrice]);_26.updateMaxBid(_21);_26.updateIncreaseBid(_21,_23);if(!_21.isAutoRefresh){_1.superclass.toggleBidEvt.apply(_26,[cfg.bidURL,false]);}if(_26.fastDur&&_26.fastDur>_26.bidUtil.convertToSeconds(timeLeft)){$("#"+cfg.updateId+cfg.btn).css({visibility:"hidden"});}else{$("#"+cfg.updateId+cfg.btn).css({visibility:"visible"});}},activeItemStatus:function(_27,_28,_29,_2a){var _2b=this,cfg=_2b.cfg,msgId,msgType=-1,flashClz;if((_27===_2b.BidderStatus.HIGHBIDDER&&!_28)){msgId=cfg.HIGHBIDDER_STATUS;msgType=3;flashClz=cfg.successClz;}else{if(_27===_2b.BidderStatus.HIGHBIDDER&&_28&&_29){msgId=cfg.HIGHBIDDER_STATUS;msgType=3;flashClz=cfg.successClz;}else{if(_27===_2b.BidderStatus.HIGHBIDDER&&_28&&!_29){msgId=cfg.HIGHBIDDER_RESERVE_NOT_MET_STATUS;msgType=1;}else{if(_27===_2b.BidderStatus.OUTBIDDER){msgId=cfg.OUTBIDDER_STATUS;msgType=2;flashClz=cfg.warningClz;}}}}if(!_2b.prevBidderStatus||(_2b.prevBidderStatus&&_2a)){flashClz=null;}_2b.showStatus(msgId,msgType,flashClz);_2b.prevBidderStatus=_27;},updateBidAmtError:function(_2c){var _2d=this,cfg=_2d.cfg,msgId,msgType=0,flashClz=cfg.errorClz;if(_2c===_2d.BidError.LOW_BIDAMOUNT){msgId=cfg.MIN_BID_ERROR_STATUS;}else{if(_2c===_2d.BidError.OFFER_AMOUNT_ZERO){msgId=cfg.MIN_BID_ERROR_STATUS;}else{if(_2c===_2d.BidError.INVALID_BIDAMOUNT_OF_HIGH_BIDDER){msgId=cfg.HIGH_BID_ERROR_STATUS;}else{if(_2c===_2d.BidError.INVALID_BIDAMOUNT){msgId=cfg.MAKE_BID_ERROR_STATUS;}}}}_2d.showStatus(msgId,msgType,flashClz);return;},showStatus:function(_2e,_2f,_30){var _31=this,cfg=_31.cfg;if(_2e&&_2f!==-1){_31.util.updateStatusMsg(_2f,_31.statusMsg);_31.util.displayContent(cfg.statusMsgId,$("#"+_2e).html(),cfg.value,cfg.wrapper);_31.showFlash(_2f,_30);}},showFlash:function(_32,_33){var _34=this,cfg=_34.cfg,flashTimeOut,eId=cfg.statusMsgId+cfg.value;if(_33){$("#"+eId).addClass(_33);flashTimeOut=setTimeout(function(){$("#"+eId).removeClass(_33);},1000);}},updateTimeLeft:function(_35){var _36=this,cfg=_36.cfg,day,hour,minute,second,timeLeftValue="";if(_35){day=_35.day;hour=_35.hour;minute=_35.minute;second=_35.second;dayTxt=(day===1)?cfg.dayTxt:cfg.daysTxt;hourTxt=(hour===1)?cfg.hourTxt:cfg.hoursTxt;minuteTxt=(minute===1)?cfg.minuteTxt:cfg.minutesTxt;secondTxt=(second===1)?cfg.secondTxt:cfg.secondsTxt;if(day>0){timeLeftValue+=_36.bidUtil.appendTime(day,dayTxt,true)+_36.bidUtil.appendTime(hour,hourTxt,true);}else{if(day===0){if(hour>0){timeLeftValue+=_36.bidUtil.appendTime(hour,hourTxt,true)+_36.bidUtil.appendTime(minute,minuteTxt,true);}else{if(hour===0){timeLeftValue+=_36.bidUtil.appendTime(minute,minuteTxt,true)+_36.bidUtil.appendTime(second,secondTxt,true);}}}}_36.util.displayContent(cfg.timeLeftId,timeLeftValue,cfg.value);}},updateMaxBid:function(_37){var _38=this,cfg=_38.cfg,maximumBid=_37.MaximumBid;if(!_37.IsAdminView){if(maximumBid){_38.util.displayContent(cfg.reviewBidId,maximumBid.MoneyStandard,cfg.value,cfg.wrapper);}_1.superclass.updateApprox.apply(_38,[_37.MaximumBidLocal,cfg.reviewBidId]);}},updateIncreaseBid:function(_39,_3a){var _3b=this,cfg=_3b.cfg,increasedBid,minToBid=_39.MinimumToBid,bidAmt;if(!_39.IsAdminView){increasedBid=_39.MaxBidPlusOneIncrement;if(_3a===_3b.BidderStatus.HIGHBIDDER&&increasedBid){bidAmt=increasedBid.CleanAmount;}else{if(minToBid){bidAmt=minToBid.CleanAmount;}}if(bidAmt&&!($("#"+cfg.enterBidId+cfg.value).is(":focus"))){$("#"+cfg.enterBidId+cfg.value).val(bidAmt);}$("#"+cfg.enterBidId+cfg.wrapper).show();}if(minToBid){_1.superclass.updateCurrency.apply(_3b,[minToBid.CurrencySymbol]);}}};return _1;});
raptor.defineClass("com.ebay.raptor.vi.notification",function(){return{init:function(a){var b=this;b.conf=a;if(a.startTime&&a.displayTime){b.bindNotifyCmpEvents();if(a.type=="0")b.interval=b.startCountdown();else a.type=="1"&&$(document).bind("scroll.vi.notification",function(){$(document).unbind("scroll.vi.notification");b.showMessaging()})}},bindNotifyCmpEvents:function(){var a=this,b=$("#"+a.conf.notificationElm+"_cls_btn");b&&b.bind("click",function(){trackingUtil("VI_NOTIFICATION_ON_CLOSE");
$("#"+a.conf.notificationElm).hide()})},setComponentLeftPos:function(){var a=this;a.conf.cmpWidth=$("#"+a.conf.notificationElm).width();var b=$("#Body").outerWidth(),c=(parseInt(document.documentElement.clientWidth)-b)/2,d=0,e=0;if(c+2*a.conf.leftPaddingOffset>a.conf.cmpWidth)if(a.conf.alignType=="1")e=c-a.conf.cmpWidth-a.conf.leftPaddingOffset;else d=a.conf.redesign?c-a.conf.cmpWidth-2*a.conf.leftPaddingOffset:c-a.conf.cmpWidth-a.conf.leftPaddingOffset;else if(a.conf.alignType=="1")e=c>0?c+a.conf.leftPaddingOffset:
a.conf.leftPaddingOffset;else d=a.conf.leftPaddingOffset;a.conf.alignType=="1"?$("#"+a.conf.notificationElm).css("right",e+"px"):$("#"+a.conf.notificationElm).css("left",d+"px")},startCountdown:function(){var a=this;return setInterval(function(){a.showMessaging()},a.conf.startTime)},showMessaging:function(){var a=this;clearInterval(a.interval);a.setComponentLeftPos();var b=$("#"+a.conf.notificationElm);$(b).fadeIn("slow",function(){a.interval=setTimeout(function(){clearInterval(this);$(b).fadeOut("slow")},
a.conf.displayTime)})}}});
raptor.defineClass("raptor.merch.MerchManager",function(){return{init:function(b){var a=this;a.m=b;a.url=b.url;a.pubsub=raptor.require("pubsub");if(a.customCallbackHandler)a.pubsub.subscribe("MERCH_INIT",function(){a.sendUrl()});else if(a.m.enableOnScroll){a.scrollHandler=function(){a.callMerchOnScroll()};$(window).bind("scroll",a.scrollHandler)}else $(document).ready(function(){window.setTimeout(function(){a.sendUrl()},0)})},callMerchOnScroll:function(){var b=this.m.pids,a=this.m.th,d=$(window).scrollTop(),
c=b.length,e="merch_html_",g=b[0],f=e+g,h=$("#"+f);if(h){var i=$("#"+f).offset().top,j=$(window).height();i<=d+j+a&&this.sendUrl()}},sendUrl:function(){var b=this.url;if(b){this.getJson(b);this.m.enableOnScroll&&$(window).unbind("scroll",this.scrollHandler)}},getJson:function(b){var a=this,d="merchCallBack";window.merchCallBack=function(c){a.render(c)};a.m.loadJsAsync?a.loadJSAsync(b+"&callback=parent.window."+d):$.getJSON(b+"&callback=?",function(c){a.render(c)},a)},render:function(b){var a=this.m.merchRaptorEnabled?
b:b.data.map;if(this.customCallbackHandler)this.pubsub.publish("MERCH_RESPONSE",{data:b});else for(var d in a)if(b=a[d]){var c=document.getElementById("merch_html_"+d);if(c){this.executeScripts(b.html);c.style.display="none";c.innerHTML=b.html;this.loadCssJS(b);c.style.display="block"}}},executeScripts:function(b){for(var a,d=/<script\b[\s\S]*?>([\s\S]*?)<\/script>/ig;a=d.exec(b);){var c=a[1];if(c){var e=this.getHead();a=this.createScript();a.type="text/javascript";a.text=c;e.appendChild(a)}}},getHead:function(){return document.getElementsByTagName("head")[0]},
createScript:function(){return document.createElement("script")},loadJSAsync:function(b){var a=document.createElement("iframe");(a.frameElement||a).style.cssText="width: 0; height: 0; border: 0";(a.frameElement||a).src="javascript:false";var d=document.getElementsByTagName("script");d=d[d.length-1];d.parentNode.insertBefore(a,d);var c=a.contentWindow.document;c.open().write("<body onload=\"var js = document.createElement('script');js.src = '"+b+"';document.body.appendChild(js);\">");c.close()},loadCssJS:function(b){for(var a=
b.cssUrl,d=b.jsUrl,c=0;c<a.length;c++)$("head").append($("<link/>").attr({type:"text/css",rel:"stylesheet",href:a[c]}));for(a=0;a<d.length;a++)$.ajax({type:"GET",url:d[a],success:function(){},dataType:"script",cache:true})}}});
